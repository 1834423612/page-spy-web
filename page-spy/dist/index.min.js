var PageSpy = (function () {
  'use strict';
  function asyncGeneratorStep(e, t, r, n, o, i, a) {
    try {
      var s = e[i](a),
        c = s.value;
    } catch (e) {
      return void r(e);
    }
    s.done ? t(c) : Promise.resolve(c).then(n, o);
  }
  function _asyncToGenerator(s) {
    return function () {
      var e = this,
        a = arguments;
      return new Promise(function (t, r) {
        var n = s.apply(e, a);
        function o(e) {
          asyncGeneratorStep(n, t, r, o, i, 'next', e);
        }
        function i(e) {
          asyncGeneratorStep(n, t, r, o, i, 'throw', e);
        }
        o(void 0);
      });
    };
  }
  function _classCallCheck(e, t) {
    if (!(e instanceof t))
      throw new TypeError('Cannot call a class as a function');
  }
  function _typeof$1(e) {
    return (_typeof$1 =
      'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
        ? function (e) {
            return typeof e;
          }
        : function (e) {
            return e &&
              'function' == typeof Symbol &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? 'symbol'
              : typeof e;
          })(e);
  }
  function _toPrimitive(e, t) {
    if ('object' !== _typeof$1(e) || null === e) return e;
    var r = e[Symbol.toPrimitive];
    if (void 0 === r) return ('string' === t ? String : Number)(e);
    r = r.call(e, t || 'default');
    if ('object' !== _typeof$1(r)) return r;
    throw new TypeError('@@toPrimitive must return a primitive value.');
  }
  function _toPropertyKey(e) {
    e = _toPrimitive(e, 'string');
    return 'symbol' === _typeof$1(e) ? e : String(e);
  }
  function _defineProperties(e, t) {
    for (var r = 0; r < t.length; r++) {
      var n = t[r];
      (n.enumerable = n.enumerable || !1),
        (n.configurable = !0),
        'value' in n && (n.writable = !0),
        Object.defineProperty(e, _toPropertyKey(n.key), n);
    }
  }
  function _createClass(e, t, r) {
    return (
      t && _defineProperties(e.prototype, t),
      r && _defineProperties(e, r),
      Object.defineProperty(e, 'prototype', { writable: !1 }),
      e
    );
  }
  function _defineProperty(e, t, r) {
    (t = _toPropertyKey(t)) in e
      ? Object.defineProperty(e, t, {
          value: r,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (e[t] = r);
  }
  var regeneratorRuntimeExports = {},
    regeneratorRuntime$1 = {
      get exports() {
        return regeneratorRuntimeExports;
      },
      set exports(e) {
        regeneratorRuntimeExports = e;
      },
    },
    _typeofExports = {},
    _typeof = {
      get exports() {
        return _typeofExports;
      },
      set exports(e) {
        _typeofExports = e;
      },
    },
    runtime =
      (!(function (t) {
        function r(e) {
          return (
            (t.exports = r =
              'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                ? function (e) {
                    return typeof e;
                  }
                : function (e) {
                    return e &&
                      'function' == typeof Symbol &&
                      e.constructor === Symbol &&
                      e !== Symbol.prototype
                      ? 'symbol'
                      : typeof e;
                  }),
            (t.exports.__esModule = !0),
            (t.exports.default = t.exports),
            r(e)
          );
        }
        (t.exports = r),
          (t.exports.__esModule = !0),
          (t.exports.default = t.exports);
      })(_typeof),
      !(function (P) {
        var k = _typeofExports.default;
        function e() {
          (P.exports = function () {
            return a;
          }),
            (P.exports.__esModule = !0),
            (P.exports.default = P.exports);
          var a = {},
            e = Object.prototype,
            c = e.hasOwnProperty,
            l =
              Object.defineProperty ||
              function (e, t, r) {
                e[t] = r.value;
              },
            t = 'function' == typeof Symbol ? Symbol : {},
            n = t.iterator || '@@iterator',
            r = t.asyncIterator || '@@asyncIterator',
            o = t.toStringTag || '@@toStringTag';
          function i(e, t, r) {
            return (
              Object.defineProperty(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              }),
              e[t]
            );
          }
          try {
            i({}, '');
          } catch (e) {
            i = function (e, t, r) {
              return (e[t] = r);
            };
          }
          function s(e, t, r, n) {
            var o,
              i,
              a,
              s,
              t = t && t.prototype instanceof p ? t : p,
              t = Object.create(t.prototype),
              n = new w(n || []);
            return (
              l(t, '_invoke', {
                value:
                  ((o = e),
                  (i = r),
                  (a = n),
                  (s = 'suspendedStart'),
                  function (e, t) {
                    if ('executing' === s)
                      throw new Error('Generator is already running');
                    if ('completed' === s) {
                      if ('throw' === e) throw t;
                      return S();
                    }
                    for (a.method = e, a.arg = t; ; ) {
                      var r = a.delegate;
                      if (r) {
                        r = (function e(t, r) {
                          var n = r.method,
                            o = t.iterator[n];
                          if (void 0 === o)
                            return (
                              (r.delegate = null),
                              ('throw' === n &&
                                t.iterator.return &&
                                ((r.method = 'return'),
                                (r.arg = void 0),
                                e(t, r),
                                'throw' === r.method)) ||
                                ('return' !== n &&
                                  ((r.method = 'throw'),
                                  (r.arg = new TypeError(
                                    "The iterator does not provide a '" +
                                      n +
                                      "' method",
                                  )))),
                              u
                            );
                          n = d(o, t.iterator, r.arg);
                          if ('throw' === n.type)
                            return (
                              (r.method = 'throw'),
                              (r.arg = n.arg),
                              (r.delegate = null),
                              u
                            );
                          o = n.arg;
                          return o
                            ? o.done
                              ? ((r[t.resultName] = o.value),
                                (r.next = t.nextLoc),
                                'return' !== r.method &&
                                  ((r.method = 'next'), (r.arg = void 0)),
                                (r.delegate = null),
                                u)
                              : o
                            : ((r.method = 'throw'),
                              (r.arg = new TypeError(
                                'iterator result is not an object',
                              )),
                              (r.delegate = null),
                              u);
                        })(r, a);
                        if (r) {
                          if (r === u) continue;
                          return r;
                        }
                      }
                      if ('next' === a.method) a.sent = a._sent = a.arg;
                      else if ('throw' === a.method) {
                        if ('suspendedStart' === s)
                          throw ((s = 'completed'), a.arg);
                        a.dispatchException(a.arg);
                      } else 'return' === a.method && a.abrupt('return', a.arg);
                      s = 'executing';
                      r = d(o, i, a);
                      if ('normal' === r.type) {
                        if (
                          ((s = a.done ? 'completed' : 'suspendedYield'),
                          r.arg === u)
                        )
                          continue;
                        return { value: r.arg, done: a.done };
                      }
                      'throw' === r.type &&
                        ((s = 'completed'),
                        (a.method = 'throw'),
                        (a.arg = r.arg));
                    }
                  }),
              }),
              t
            );
          }
          function d(e, t, r) {
            try {
              return { type: 'normal', arg: e.call(t, r) };
            } catch (e) {
              return { type: 'throw', arg: e };
            }
          }
          a.wrap = s;
          var u = {};
          function p() {}
          function f() {}
          function m() {}
          var t = {},
            y =
              (i(t, n, function () {
                return this;
              }),
              Object.getPrototypeOf),
            y = y && y(y(E([]))),
            h =
              (y && y !== e && c.call(y, n) && (t = y),
              (m.prototype = p.prototype = Object.create(t)));
          function g(e) {
            ['next', 'throw', 'return'].forEach(function (t) {
              i(e, t, function (e) {
                return this._invoke(t, e);
              });
            });
          }
          function A(a, s) {
            var t;
            l(this, '_invoke', {
              value: function (r, n) {
                function e() {
                  return new s(function (e, t) {
                    !(function t(e, r, n, o) {
                      var i,
                        e = d(a[e], a, r);
                      if ('throw' !== e.type)
                        return (r = (i = e.arg).value) &&
                          'object' == k(r) &&
                          c.call(r, '__await')
                          ? s.resolve(r.__await).then(
                              function (e) {
                                t('next', e, n, o);
                              },
                              function (e) {
                                t('throw', e, n, o);
                              },
                            )
                          : s.resolve(r).then(
                              function (e) {
                                (i.value = e), n(i);
                              },
                              function (e) {
                                return t('throw', e, n, o);
                              },
                            );
                      o(e.arg);
                    })(r, n, e, t);
                  });
                }
                return (t = t ? t.then(e, e) : e());
              },
            });
          }
          function v(e) {
            var t = { tryLoc: e[0] };
            1 in e && (t.catchLoc = e[1]),
              2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
              this.tryEntries.push(t);
          }
          function b(e) {
            var t = e.completion || {};
            (t.type = 'normal'), delete t.arg, (e.completion = t);
          }
          function w(e) {
            (this.tryEntries = [{ tryLoc: 'root' }]),
              e.forEach(v, this),
              this.reset(!0);
          }
          function E(t) {
            if (t) {
              var r,
                e = t[n];
              if (e) return e.call(t);
              if ('function' == typeof t.next) return t;
              if (!isNaN(t.length))
                return (
                  (r = -1),
                  ((e = function e() {
                    for (; ++r < t.length; )
                      if (c.call(t, r))
                        return (e.value = t[r]), (e.done = !1), e;
                    return (e.value = void 0), (e.done = !0), e;
                  }).next = e)
                );
            }
            return { next: S };
          }
          function S() {
            return { value: void 0, done: !0 };
          }
          return (
            l(h, 'constructor', { value: (f.prototype = m), configurable: !0 }),
            l(m, 'constructor', { value: f, configurable: !0 }),
            (f.displayName = i(m, o, 'GeneratorFunction')),
            (a.isGeneratorFunction = function (e) {
              e = 'function' == typeof e && e.constructor;
              return (
                !!e &&
                (e === f || 'GeneratorFunction' === (e.displayName || e.name))
              );
            }),
            (a.mark = function (e) {
              return (
                Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, m)
                  : ((e.__proto__ = m), i(e, o, 'GeneratorFunction')),
                (e.prototype = Object.create(h)),
                e
              );
            }),
            (a.awrap = function (e) {
              return { __await: e };
            }),
            g(A.prototype),
            i(A.prototype, r, function () {
              return this;
            }),
            (a.AsyncIterator = A),
            (a.async = function (e, t, r, n, o) {
              void 0 === o && (o = Promise);
              var i = new A(s(e, t, r, n), o);
              return a.isGeneratorFunction(t)
                ? i
                : i.next().then(function (e) {
                    return e.done ? e.value : i.next();
                  });
            }),
            g(h),
            i(h, o, 'Generator'),
            i(h, n, function () {
              return this;
            }),
            i(h, 'toString', function () {
              return '[object Generator]';
            }),
            (a.keys = function (e) {
              var t,
                r = Object(e),
                n = [];
              for (t in r) n.push(t);
              return (
                n.reverse(),
                function e() {
                  for (; n.length; ) {
                    var t = n.pop();
                    if (t in r) return (e.value = t), (e.done = !1), e;
                  }
                  return (e.done = !0), e;
                }
              );
            }),
            (a.values = E),
            (w.prototype = {
              constructor: w,
              reset: function (e) {
                if (
                  ((this.prev = 0),
                  (this.next = 0),
                  (this.sent = this._sent = void 0),
                  (this.done = !1),
                  (this.delegate = null),
                  (this.method = 'next'),
                  (this.arg = void 0),
                  this.tryEntries.forEach(b),
                  !e)
                )
                  for (var t in this)
                    't' === t.charAt(0) &&
                      c.call(this, t) &&
                      !isNaN(+t.slice(1)) &&
                      (this[t] = void 0);
              },
              stop: function () {
                this.done = !0;
                var e = this.tryEntries[0].completion;
                if ('throw' === e.type) throw e.arg;
                return this.rval;
              },
              dispatchException: function (r) {
                if (this.done) throw r;
                var n = this;
                function e(e, t) {
                  return (
                    (i.type = 'throw'),
                    (i.arg = r),
                    (n.next = e),
                    t && ((n.method = 'next'), (n.arg = void 0)),
                    !!t
                  );
                }
                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                  var o = this.tryEntries[t],
                    i = o.completion;
                  if ('root' === o.tryLoc) return e('end');
                  if (o.tryLoc <= this.prev) {
                    var a = c.call(o, 'catchLoc'),
                      s = c.call(o, 'finallyLoc');
                    if (a && s) {
                      if (this.prev < o.catchLoc) return e(o.catchLoc, !0);
                      if (this.prev < o.finallyLoc) return e(o.finallyLoc);
                    } else if (a) {
                      if (this.prev < o.catchLoc) return e(o.catchLoc, !0);
                    } else {
                      if (!s)
                        throw new Error(
                          'try statement without catch or finally',
                        );
                      if (this.prev < o.finallyLoc) return e(o.finallyLoc);
                    }
                  }
                }
              },
              abrupt: function (e, t) {
                for (var r = this.tryEntries.length - 1; 0 <= r; --r) {
                  var n = this.tryEntries[r];
                  if (
                    n.tryLoc <= this.prev &&
                    c.call(n, 'finallyLoc') &&
                    this.prev < n.finallyLoc
                  ) {
                    var o = n;
                    break;
                  }
                }
                var i = (o =
                  o &&
                  ('break' === e || 'continue' === e) &&
                  o.tryLoc <= t &&
                  t <= o.finallyLoc
                    ? null
                    : o)
                  ? o.completion
                  : {};
                return (
                  (i.type = e),
                  (i.arg = t),
                  o
                    ? ((this.method = 'next'), (this.next = o.finallyLoc), u)
                    : this.complete(i)
                );
              },
              complete: function (e, t) {
                if ('throw' === e.type) throw e.arg;
                return (
                  'break' === e.type || 'continue' === e.type
                    ? (this.next = e.arg)
                    : 'return' === e.type
                    ? ((this.rval = this.arg = e.arg),
                      (this.method = 'return'),
                      (this.next = 'end'))
                    : 'normal' === e.type && t && (this.next = t),
                  u
                );
              },
              finish: function (e) {
                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                  var r = this.tryEntries[t];
                  if (r.finallyLoc === e)
                    return this.complete(r.completion, r.afterLoc), b(r), u;
                }
              },
              catch: function (e) {
                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                  var r,
                    n,
                    o = this.tryEntries[t];
                  if (o.tryLoc === e)
                    return (
                      'throw' === (r = o.completion).type &&
                        ((n = r.arg), b(o)),
                      n
                    );
                }
                throw new Error('illegal catch attempt');
              },
              delegateYield: function (e, t, r) {
                return (
                  (this.delegate = {
                    iterator: E(e),
                    resultName: t,
                    nextLoc: r,
                  }),
                  'next' === this.method && (this.arg = void 0),
                  u
                );
              },
            }),
            a
          );
        }
        (P.exports = e),
          (P.exports.__esModule = !0),
          (P.exports.default = P.exports);
      })(regeneratorRuntime$1),
      regeneratorRuntimeExports()),
    regenerator = runtime;
  try {
    regeneratorRuntime = runtime;
  } catch (accidentalStrictMode) {
    'object' == typeof globalThis
      ? (globalThis.regeneratorRuntime = runtime)
      : Function('r', 'regeneratorRuntime = r')(runtime);
  }
  var Modal = (function () {
      function n() {
        var t = this,
          e =
            0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
          r = (_classCallCheck(this, n), e.className),
          r = void 0 === r ? '' : r,
          e = e.el,
          e = document.createElement(void 0 === e ? 'div' : e);
        (e.className = ['page-spy-modal', r].join(' ')),
          (e.style.display = 'none'),
          (e.onclick = function (e) {
            e.stopPropagation(), e.preventDefault(), t.close();
          }),
          (this.el = e);
      }
      return (
        _createClass(n, [
          {
            key: 'show',
            value: function () {
              var e = this;
              (this.el.style.display = 'flex'),
                setTimeout(function () {
                  e.el.classList.add('show');
                }, 50);
            },
          },
          {
            key: 'close',
            value: function () {
              var e = this;
              this.el.classList.remove('show'),
                setTimeout(function () {
                  e.el.style.display = 'none';
                }, 300);
            },
          },
          {
            key: 'append',
            value: function (e) {
              this.el.appendChild(e);
            },
          },
        ]),
        n
      );
    })(),
    toggleSelection = function () {
      var t = document.getSelection();
      if (!t.rangeCount) return function () {};
      for (var e = document.activeElement, r = [], n = 0; n < t.rangeCount; n++)
        r.push(t.getRangeAt(n));
      switch (e.tagName.toUpperCase()) {
        case 'INPUT':
        case 'TEXTAREA':
          e.blur();
          break;
        default:
          e = null;
      }
      return (
        t.removeAllRanges(),
        function () {
          'Caret' === t.type && t.removeAllRanges(),
            t.rangeCount ||
              r.forEach(function (e) {
                t.addRange(e);
              }),
            e && e.focus();
        }
      );
    },
    deselectCurrent = toggleSelection,
    clipboardToIE11Formatting = {
      'text/plain': 'Text',
      'text/html': 'Url',
      default: 'Text',
    },
    defaultMessage = 'Copy to clipboard: #{key}, Enter';
  function format(e) {
    var t = (/mac os x/i.test(navigator.userAgent) ? '⌘' : 'Ctrl') + '+C';
    return e.replace(/#{\s*key\s*}/g, t);
  }
  function copy(r, n) {
    var t,
      e,
      o = !1,
      i = (n = n || {}).debug || !1;
    try {
      var a = deselectCurrent(),
        s = document.createRange(),
        c = document.getSelection();
      if (
        (((e = document.createElement('span')).textContent = r),
        (e.ariaHidden = 'true'),
        (e.style.all = 'unset'),
        (e.style.position = 'fixed'),
        (e.style.top = 0),
        (e.style.clip = 'rect(0, 0, 0, 0)'),
        (e.style.whiteSpace = 'pre'),
        (e.style.webkitUserSelect = 'text'),
        (e.style.MozUserSelect = 'text'),
        (e.style.msUserSelect = 'text'),
        (e.style.userSelect = 'text'),
        e.addEventListener('copy', function (e) {
          var t;
          e.stopPropagation(),
            n.format &&
              (e.preventDefault(),
              void 0 === e.clipboardData
                ? (i && console.warn('unable to use e.clipboardData'),
                  i && console.warn('trying IE specific stuff'),
                  window.clipboardData.clearData(),
                  (t =
                    clipboardToIE11Formatting[n.format] ||
                    clipboardToIE11Formatting.default),
                  window.clipboardData.setData(t, r))
                : (e.clipboardData.clearData(),
                  e.clipboardData.setData(n.format, r))),
            n.onCopy && (e.preventDefault(), n.onCopy(e.clipboardData));
        }),
        document.body.appendChild(e),
        s.selectNodeContents(e),
        c.addRange(s),
        !document.execCommand('copy'))
      )
        throw new Error('copy command was unsuccessful');
      o = !0;
    } catch (e) {
      i && console.error('unable to copy using execCommand: ', e),
        i && console.warn('trying IE specific stuff');
      try {
        window.clipboardData.setData(n.format || 'text', r),
          n.onCopy && n.onCopy(window.clipboardData),
          (o = !0);
      } catch (e) {
        i && console.error('unable to copy using clipboardData: ', e),
          i && console.error('falling back to prompt'),
          (t = format('message' in n ? n.message : defaultMessage)),
          window.prompt(t, r);
      }
    } finally {
      c &&
        ('function' == typeof c.removeRange
          ? c.removeRange(s)
          : c.removeAllRanges()),
        e && document.body.removeChild(e),
        a();
    }
    return o;
  }
  var copyToClipboard = copy;
  function ownKeys$6(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$6(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$6(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$6(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var Content = (function () {
    function r(e) {
      _classCallCheck(this, r), (this.options = _objectSpread$6({}, e));
      var t = document.createElement('div');
      (t.className = ['page-spy-content', e.className].join(' ')),
        (t.onclick = function (e) {
          e.stopPropagation();
        }),
        (this.el = t),
        this.render();
    }
    return (
      _createClass(r, [
        {
          key: 'render',
          value: function () {
            var e = this.options,
              t = e.content,
              t = void 0 === t ? {} : t,
              e = e.onOk,
              r = void 0 === e ? function () {} : e,
              e = t.name,
              n = t.address,
              o = void 0 === n ? '--' : n,
              n = t.project,
              t = void 0 === n ? '--' : n,
              n = '\n      <p>System: '
                .concat(
                  void 0 === e ? '--' : e,
                  '</p>\n      <p>Device ID: <span style="font-family: \'Monaco\'">',
                )
                .concat(
                  o,
                  '</span></p>\n      <p>Group: <span style="font-family: \'Monaco\'">',
                )
                .concat(t, '</span></p>\n    '),
              e = document.createElement('div'),
              t =
                ((e.className = 'page-spy-content__info'),
                (e.innerHTML = n),
                document.createElement('div'));
            (t.className = 'page-spy-content__ok'),
              (t.textContent = 'Copy'),
              (t.onclick = function (e) {
                e.stopPropagation(),
                  copyToClipboard(''.concat(o)) &&
                    (alert('Copy successfully!'), r());
              }),
              this.el.append(e, t);
          },
        },
      ]),
      r
    );
  })();
  function _arrayLikeToArray$1(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
    return n;
  }
  function _arrayWithoutHoles(e) {
    if (Array.isArray(e)) return _arrayLikeToArray$1(e);
  }
  function _iterableToArray(e) {
    if (
      ('undefined' != typeof Symbol && null != e[Symbol.iterator]) ||
      null != e['@@iterator']
    )
      return Array.from(e);
  }
  function _unsupportedIterableToArray$1(e, t) {
    var r;
    if (e)
      return 'string' == typeof e
        ? _arrayLikeToArray$1(e, t)
        : 'Map' ===
            (r =
              'Object' ===
                (r = Object.prototype.toString.call(e).slice(8, -1)) &&
              e.constructor
                ? e.constructor.name
                : r) || 'Set' === r
        ? Array.from(e)
        : 'Arguments' === r ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)
        ? _arrayLikeToArray$1(e, t)
        : void 0;
  }
  function _nonIterableSpread() {
    throw new TypeError(
      'Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
    );
  }
  function _toConsumableArray(e) {
    return (
      _arrayWithoutHoles(e) ||
      _iterableToArray(e) ||
      _unsupportedIterableToArray$1(e) ||
      _nonIterableSpread()
    );
  }
  function getRandomId() {
    return Math.random().toString(36).slice(2);
  }
  function getObjectKeys(e) {
    return Object.keys(e);
  }
  function getContentType(e) {
    return e instanceof Blob
      ? e.type
      : e instanceof FormData
      ? 'multipart/form-data'
      : e instanceof URLSearchParams
      ? 'application/x-www-form-urlencoded;charset=UTF-8'
      : 'text/plain;charset=UTF-8';
  }
  function toStringTag(e) {
    return Object.prototype.toString.call(e);
  }
  function hasOwnProperty(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t);
  }
  function getPrototypeName(e) {
    return toStringTag(e).replace(/\[object (.*)\]/, '$1');
  }
  function isString(e) {
    return '[object String]' === toStringTag(e);
  }
  function isNumber(e) {
    return '[object Number]' === toStringTag(e);
  }
  function isArray(e) {
    return '[object Array]' === toStringTag(e);
  }
  function isArrayLike(e) {
    return e instanceof NodeList || e instanceof HTMLCollection;
  }
  function isObjectLike(e) {
    return 'object' === _typeof$1(e) && null !== e;
  }
  function isBigInt(e) {
    return '[object BigInt]' === toStringTag(e);
  }
  function isPlainObject(e) {
    return !(!isObjectLike(e) || '[object Object]' !== toStringTag(e));
  }
  function isPrototype(e) {
    return !(
      !isObjectLike(e) ||
      !hasOwnProperty(e, 'constructor') ||
      'function' != typeof e.constructor
    );
  }
  function isBlob(e) {
    return '[object Blob]' === toStringTag(e);
  }
  function isArrayBuffer(e) {
    return '[object ArrayBuffer]' === toStringTag(e);
  }
  var stringify = function (e) {
      return ''.concat(e);
    },
    primitive = function (e) {
      return { ok: !0, value: e };
    };
  function makePrimitiveValue(e) {
    return void 0 === e ||
      (isNumber(e) && (e === -1 / 0 || e === 1 / 0 || Number.isNaN(e)))
      ? primitive(stringify(e))
      : isBigInt(e)
      ? primitive(''.concat(e, 'n'))
      : 'symbol' === _typeof$1(e) || 'function' == typeof e
      ? primitive(stringify(e.toString()))
      : e instanceof Error
      ? primitive(stringify(e.stack))
      : e === Object.prototype
      ? { value: null, ok: !1 }
      : e instanceof Object || e instanceof Array
      ? { value: e, ok: !1 }
      : primitive(e);
  }
  function stringifyData(e) {
    var t = makePrimitiveValue(e),
      r = t.ok,
      t = t.value;
    return r
      ? t
      : JSON.stringify(
          e,
          function (e, t) {
            return makePrimitiveValue(t).value;
          },
          2,
        );
  }
  function getValueType(e) {
    return void 0 === e
      ? 'undefined'
      : null === e
      ? 'null'
      : isBigInt(e)
      ? 'bigint'
      : e instanceof Object
      ? e instanceof Error
        ? 'error'
        : e instanceof Function
        ? 'function'
        : 'object'
      : _typeof$1(e);
  }
  function ownKeys$5(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$5(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$5(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$5(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var SERVER_MESSAGE_TYPE = {
      connect: 'connect',
      join: 'join',
      leave: 'leave',
      close: 'close',
      message: 'message',
      send: 'send',
      error: 'error',
    },
    MESSAGE_TYPE = {
      connect: 'connect',
      console: 'console',
      system: 'system',
      network: 'network',
      page: 'page',
      storage: 'storage',
      debug: 'debug',
      refresh: 'refresh',
      'atom-detail': 'atom-detail',
      'atom-getter': 'atom-getter',
    };
  function makeMessage(e, t) {
    var r = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2],
      t = _objectSpread$5({}, t);
    return r && (t.id = getRandomId()), { role: 'client', type: e, data: t };
  }
  function makeUnicastMessage(e, t, r) {
    return {
      type: SERVER_MESSAGE_TYPE.send,
      content: { data: e, from: t, to: r },
    };
  }
  function makeBroadcastMessage(e) {
    return { type: SERVER_MESSAGE_TYPE.message, content: { data: e } };
  }
  function _arrayWithHoles(e) {
    if (Array.isArray(e)) return e;
  }
  function _iterableToArrayLimit(e, t) {
    var r =
      null == e
        ? null
        : ('undefined' != typeof Symbol && e[Symbol.iterator]) ||
          e['@@iterator'];
    if (null != r) {
      var n,
        o,
        i,
        a,
        s = [],
        c = !0,
        l = !1;
      try {
        if (((i = (r = r.call(e)).next), 0 === t)) {
          if (Object(r) !== r) return;
          c = !1;
        } else
          for (
            ;
            !(c = (n = i.call(r)).done) && (s.push(n.value), s.length !== t);
            c = !0
          );
      } catch (e) {
        (l = !0), (o = e);
      } finally {
        try {
          if (!c && null != r.return && ((a = r.return()), Object(a) !== a))
            return;
        } finally {
          if (l) throw o;
        }
      }
      return s;
    }
  }
  function _nonIterableRest() {
    throw new TypeError(
      'Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
    );
  }
  function _slicedToArray(e, t) {
    return (
      _arrayWithHoles(e) ||
      _iterableToArrayLimit(e, t) ||
      _unsupportedIterableToArray$1(e, t) ||
      _nonIterableRest()
    );
  }
  function _createForOfIteratorHelper(e, t) {
    var r,
      n,
      o,
      i,
      a =
        ('undefined' != typeof Symbol && e[Symbol.iterator]) || e['@@iterator'];
    if (a)
      return (
        (n = !(r = !0)),
        {
          s: function () {
            a = a.call(e);
          },
          n: function () {
            var e = a.next();
            return (r = e.done), e;
          },
          e: function (e) {
            (n = !0), (o = e);
          },
          f: function () {
            try {
              r || null == a.return || a.return();
            } finally {
              if (n) throw o;
            }
          },
        }
      );
    if (
      Array.isArray(e) ||
      (a = _unsupportedIterableToArray(e)) ||
      (t && e && 'number' == typeof e.length)
    )
      return (
        a && (e = a),
        (i = 0),
        {
          s: (t = function () {}),
          n: function () {
            return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
          },
          e: function (e) {
            throw e;
          },
          f: t,
        }
      );
    throw new TypeError(
      'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
    );
  }
  function _unsupportedIterableToArray(e, t) {
    var r;
    if (e)
      return 'string' == typeof e
        ? _arrayLikeToArray(e, t)
        : 'Map' ===
            (r =
              'Object' ===
                (r = Object.prototype.toString.call(e).slice(8, -1)) &&
              e.constructor
                ? e.constructor.name
                : r) || 'Set' === r
        ? Array.from(e)
        : 'Arguments' === r ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)
        ? _arrayLikeToArray(e, t)
        : void 0;
  }
  function _arrayLikeToArray(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
    return n;
  }
  function ownKeys$4(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$4(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$4(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$4(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var Atom = (function () {
      function a() {
        _classCallCheck(this, a),
          _defineProperty(this, 'store', {}),
          _defineProperty(this, 'instanceStore', {});
      }
      return (
        _createClass(
          a,
          [
            {
              key: 'transformToAtom',
              value: function (e) {
                var t = makePrimitiveValue(e),
                  r = t.value;
                return t.ok
                  ? { id: getRandomId(), type: getValueType(e), value: r }
                  : this.add(e);
              },
            },
            {
              key: 'add',
              value: function (e) {
                var t =
                    1 < arguments.length && void 0 !== arguments[1]
                      ? arguments[1]
                      : '',
                  r = getRandomId(),
                  n = r,
                  t =
                    (isPrototype(e) && (n = t),
                    (this.store[r] = e),
                    (this.instanceStore[r] = n),
                    a.getSemanticValue(e));
                return a.getAtomOverview({
                  atomId: r,
                  value: t,
                  instanceId: n,
                });
              },
            },
            {
              key: 'get',
              value: function (e) {
                var r,
                  n,
                  o = this,
                  t = this.store[e],
                  i = this.instanceStore[e];
                return t
                  ? ((r = {}),
                    (n = Object.getOwnPropertyDescriptors(t)),
                    Object.keys(n).forEach(function (e) {
                      var t = n[e];
                      hasOwnProperty(t, 'value') &&
                        (t.value = o.transformToAtom(t.value)),
                        (r[e] = a.getAtomOverview({
                          atomId: getRandomId(),
                          instanceId: i,
                          value: t,
                        }));
                    }),
                    (t = this.addExtraProperty(e)),
                    _objectSpread$4(_objectSpread$4({}, r), t))
                  : null;
              },
            },
            {
              key: 'getOrigin',
              value: function (e) {
                e = this.store[e];
                return e || null;
              },
            },
            {
              key: 'addExtraProperty',
              value: function (e) {
                var t = this.store[e],
                  e = this.instanceStore[e],
                  r = {};
                if (
                  ((t instanceof String ||
                    t instanceof Number ||
                    t instanceof Boolean) &&
                    (r['[[PrimitiveValue]]'] = this.transformToAtom(
                      t.valueOf(),
                    )),
                  t instanceof Set)
                ) {
                  var n,
                    o = {},
                    i = 0,
                    a = _createForOfIteratorHelper(t);
                  try {
                    for (a.s(); !(n = a.n()).done; ) {
                      var s = n.value;
                      o[(i += 1)] = s;
                    }
                  } catch (e) {
                    a.e(e);
                  } finally {
                    a.f();
                  }
                  (o.size = t.size),
                    (r['[[Entries]]'] = this.transformToAtom(o));
                }
                if (t instanceof Map) {
                  var c,
                    l = {},
                    d = 0,
                    u = _createForOfIteratorHelper(t.entries());
                  try {
                    for (u.s(); !(c = u.n()).done; ) {
                      var p = _slicedToArray(c.value, 2),
                        f = p[0],
                        m = p[1];
                      l[(d += 1)] = { key: f, value: m };
                    }
                  } catch (e) {
                    u.e(e);
                  } finally {
                    u.f();
                  }
                  (l.size = t.size),
                    (r['[[Entries]]'] = this.transformToAtom(l));
                }
                return (
                  (isArray(t) || isArrayLike(t)) &&
                    (r.length = this.transformToAtom(t.length)),
                  null !== Object.getPrototypeOf(t)
                    ? (r['[[Prototype]]'] = this.add(
                        Object.getPrototypeOf(t),
                        e,
                      ))
                    : (r.___proto___ = this.transformToAtom(null)),
                  r
                );
              },
            },
          ],
          [
            {
              key: 'getAtomOverview',
              value: function (e) {
                var t = e.instanceId,
                  t = void 0 === t ? '' : t,
                  r = e.atomId,
                  e = e.value;
                return {
                  id: getRandomId(),
                  type: 'atom',
                  __atomId: r,
                  instanceId: t,
                  value: e,
                };
              },
            },
            {
              key: 'getSemanticValue',
              value: function (e) {
                return isPlainObject(e)
                  ? 'Object {...}'
                  : isArray(e)
                  ? 'Array ('.concat(e.length, ')')
                  : e.constructor.name;
              },
            },
          ],
        ),
        a
      );
    })(),
    atom = new Atom(),
    SocketStore = (function () {
      function e() {
        _classCallCheck(this, e),
          _defineProperty(this, 'socket', null),
          _defineProperty(this, 'socketConnection', null),
          _defineProperty(this, 'pingTimer', null),
          _defineProperty(this, 'reconnectTimes', 3),
          _defineProperty(this, 'messages', []),
          _defineProperty(this, 'isInited', !1),
          _defineProperty(this, 'events', {
            refresh: [],
            debug: [],
            'atom-detail': [],
            'atom-getter': [],
          }),
          this.addListener('debug', e.handleDebugger),
          this.addListener('atom-detail', e.handleResolveAtom),
          this.addListener('atom-getter', e.handleAtomPropertyGetter);
      }
      return (
        _createClass(
          e,
          [
            {
              key: 'init',
              value: function (e) {
                var t = this;
                try {
                  if (!e) throw Error('WebSocket 连接 URL 不可缺省');
                  (this.socket = new WebSocket(e)),
                    this.socket.addEventListener('open', function () {
                      (t.isInited = !0), t.keepConnect(), t.peelMessage();
                    }),
                    this.socket.addEventListener('close', function () {
                      (t.isInited = !1),
                        t.pingTimer && window.clearInterval(t.pingTimer),
                        t.tryReconnect();
                    }),
                    this.socket.addEventListener('error', function () {
                      throw (
                        ((t.isInited = !1),
                        (t.socket = null),
                        Error('WebSocket 连接失败'))
                      );
                    });
                } catch (e) {
                  alert('[PageSpy] '.concat(e.message));
                }
              },
            },
            {
              key: 'tryReconnect',
              value: function () {
                var e = this;
                0 < this.reconnectTimes
                  ? (--this.reconnectTimes,
                    this.socket.readyState !== WebSocket.OPEN &&
                      setTimeout(function () {
                        e.init(e.socket.url);
                      }, 1e3))
                  : ((this.socket = null),
                    this.pingTimer && window.clearInterval(this.pingTimer),
                    sessionStorage.setItem(
                      'page-spy-room',
                      JSON.stringify({ usable: !1 }),
                    ),
                    console.log('[PageSpy] Reconnect failed.'));
              },
            },
            {
              key: 'keepConnect',
              value: function () {
                var t = this;
                this.pingTimer = window.setInterval(function () {
                  var e;
                  (null == (e = t.socket) ? void 0 : e.readyState) ===
                    WebSocket.OPEN && t.send({ type: 'ping', content: null });
                }, 1e4);
              },
            },
            {
              key: 'peelMessage',
              value: function () {
                var l = this;
                this.socket &&
                  this.socket.addEventListener('message', function (e) {
                    var t,
                      r = JSON.parse(e.data),
                      e = r.type,
                      n = r.content,
                      o = n.data,
                      i = n.from,
                      a = n.to,
                      s = n.selfConnection,
                      c = r.content.connection.address;
                    switch (e) {
                      case 'connect':
                        l.socketConnection = s;
                        break;
                      case 'join':
                        l.socketConnection &&
                          l.socketConnection.address !== c &&
                          l.sendBuffer(r.content.connection);
                        break;
                      case 'send':
                        a.address ===
                          (null == (t = l.socketConnection)
                            ? void 0
                            : t.address) &&
                          l.dispatchEvent(o.type, {
                            source: o,
                            from: i,
                            to: a,
                          });
                    }
                  });
              },
            },
            {
              key: 'addListener',
              value: function (e, t) {
                this.events[e] || (this.events[e] = []), this.events[e].push(t);
              },
            },
            {
              key: 'dispatchEvent',
              value: function (e, t) {
                var r = this;
                this.events[e].forEach(function (e) {
                  e.call(r, t, function (e) {
                    r.unicastMessage(e, t.from);
                  });
                });
              },
            },
            {
              key: 'unicastMessage',
              value: function (e, t) {
                e = makeUnicastMessage(e, this.socketConnection, t);
                this.send(e);
              },
            },
            {
              key: 'broadcastMessage',
              value: function (e) {
                var t =
                    1 < arguments.length &&
                    void 0 !== arguments[1] &&
                    arguments[1],
                  e = makeBroadcastMessage(e);
                this.send(e, t);
              },
            },
            {
              key: 'sendBuffer',
              value: function (t) {
                var r = this;
                this.messages.forEach(function (e) {
                  e = {
                    type: 'send',
                    content: {
                      data: e.content.data,
                      from: r.socketConnection,
                      to: t,
                    },
                  };
                  r.send(e, !0);
                });
              },
            },
            {
              key: 'send',
              value: function (e) {
                var t,
                  r =
                    1 < arguments.length &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                if (this.isInited)
                  try {
                    null != (t = this.socket) && t.send(stringifyData(e));
                  } catch (e) {
                    throw Error('Incompatible: '.concat(e.message));
                  }
                r ||
                  -1 < ['send', 'ping'].indexOf(e.type) ||
                  this.messages.push(e);
              },
            },
            {
              key: 'close',
              value: function () {
                var e;
                this.pingTimer && window.clearInterval(this.pingTimer),
                  null != (e = this.socket) && e.close();
              },
            },
          ],
          [
            {
              key: 'handleDebugger',
              value: function (e, t) {
                var e = e.source,
                  r = e.type,
                  e = e.data;
                if (r === MESSAGE_TYPE.debug) {
                  t(
                    makeMessage(MESSAGE_TYPE.console, {
                      logType: 'debug-origin',
                      logs: [
                        { id: getRandomId(), type: 'debug-origin', value: e },
                      ],
                    }),
                  );
                  try {
                    var n = new Function('return '.concat(e))();
                    t(
                      makeMessage(MESSAGE_TYPE.console, {
                        logType: 'debug-eval',
                        logs: [atom.transformToAtom(n)],
                      }),
                    );
                  } catch (e) {
                    t(
                      makeMessage(MESSAGE_TYPE.console, {
                        logType: 'error',
                        logs: [{ type: 'error', value: e.stack }],
                      }),
                    );
                  }
                }
              },
            },
            {
              key: 'handleResolveAtom',
              value: function (e, t) {
                var e = e.source,
                  r = e.type,
                  e = e.data;
                r === MESSAGE_TYPE['atom-detail'] &&
                  ((r = atom.get(e) || {}),
                  t(makeMessage('atom-detail-'.concat(e), r, !1)));
              },
            },
            {
              key: 'handleAtomPropertyGetter',
              value: function (e, t) {
                var r,
                  n,
                  o,
                  e = e.source,
                  i = e.type,
                  e = e.data;
                i === MESSAGE_TYPE['atom-getter'] &&
                  ((i = e.id),
                  (r = e.parentId),
                  (n = e.key),
                  (e = e.instanceId),
                  (e = atom.getOrigin(e)),
                  (r = atom.getOrigin(r)),
                  (o = {}),
                  (o =
                    e && r
                      ? null == (r = Object.getOwnPropertyDescriptor(r, n)) ||
                        null == (n = r.get)
                        ? void 0
                        : n.call(e)
                      : new Error('Getter computed failed')),
                  t(
                    makeMessage(
                      'atom-getter-'.concat(i),
                      atom.transformToAtom(o),
                    ),
                  ));
              },
            },
          ],
        ),
        e
      );
    })(),
    socketStore = new SocketStore();
  function ownKeys$3(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$3(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$3(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$3(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var ConsolePlugin = (function () {
      function e() {
        _classCallCheck(this, e),
          _defineProperty(this, 'name', 'ConsolePlugin'),
          _defineProperty(this, 'console', {});
      }
      return (
        _createClass(e, [
          {
            key: 'onCreated',
            value: function () {
              var o = this;
              ['log', 'info', 'error', 'warn'].forEach(function (n) {
                (o.console[n] = window.console[n]),
                  (window.console[n] = function () {
                    for (
                      var e = arguments.length, t = new Array(e), r = 0;
                      r < e;
                      r++
                    )
                      t[r] = arguments[r];
                    o.printLog({
                      logType: n,
                      logs: t,
                      url: window.location.href,
                    });
                  });
              });
            },
          },
          {
            key: 'printLog',
            value: function (e) {
              var t;
              e.logs &&
                e.logs.length &&
                ((t = this.console)[e.logType].apply(
                  t,
                  _toConsumableArray(e.logs),
                ),
                (e.logs = e.logs.map(function (e) {
                  return atom.transformToAtom(e);
                })),
                (t = makeMessage(
                  MESSAGE_TYPE.console,
                  _objectSpread$3({ time: Date.now() }, e),
                )),
                socketStore.broadcastMessage(t));
            },
          },
        ]),
        e
      );
    })(),
    ErrorPlugin = (function () {
      function o() {
        _classCallCheck(this, o),
          _defineProperty(this, 'name', 'ErrorPlugin'),
          _defineProperty(this, 'error', null);
      }
      return (
        _createClass(
          o,
          [
            {
              key: 'onCreated',
              value: function () {
                var n = this;
                (this.error = window.onerror),
                  (window.onerror = function () {
                    for (
                      var e = arguments.length, t = new Array(e), r = 0;
                      r < e;
                      r++
                    )
                      t[r] = arguments[r];
                    o.sendMessage(t[4]), n.error && n.error.apply(window, t);
                  }),
                  window.addEventListener(
                    'error',
                    function (e) {
                      e instanceof ErrorEvent ||
                        o.sendMessage(
                          'ResourceLoadError: Cannot load resource of ('.concat(
                            e.target.src,
                            ')',
                          ),
                        );
                    },
                    !0,
                  ),
                  window.addEventListener('unhandledrejection', function (e) {
                    o.sendMessage(e.reason.stack);
                  });
              },
            },
          ],
          [
            {
              key: 'sendMessage',
              value: function (e) {
                e = makeMessage(MESSAGE_TYPE.console, {
                  logType: 'error',
                  logs: [{ type: 'error', value: e }],
                  time: Date.now(),
                  url: window.location.href,
                });
                socketStore.broadcastMessage(e);
              },
            },
          ],
        ),
        o
      );
    })(),
    blob2base64 = function (e, t) {
      var r = new FileReader();
      (r.onload = function (e) {
        t(null == (e = e.target) ? void 0 : e.result);
      }),
        (r.onerror = function () {
          t(new Error('blob2convert: can not convert'));
        }),
        r.readAsDataURL(e);
    },
    RequestItem = _createClass(function e(t) {
      _classCallCheck(this, e),
        _defineProperty(this, 'id', ''),
        _defineProperty(this, 'name', ''),
        _defineProperty(this, 'method', ''),
        _defineProperty(this, 'url', ''),
        _defineProperty(this, 'requestType', 'xhr'),
        _defineProperty(this, 'requestHeader', null),
        _defineProperty(this, 'status', 0),
        _defineProperty(this, 'statusText', ''),
        _defineProperty(this, 'readyState', 0),
        _defineProperty(this, 'responseReason', null),
        _defineProperty(this, 'responseType', ''),
        _defineProperty(this, 'responseHeader', null),
        _defineProperty(this, 'startTime', 0),
        _defineProperty(this, 'endTime', 0),
        _defineProperty(this, 'costTime', 0),
        _defineProperty(this, 'getData', null),
        _defineProperty(this, 'postData', null),
        _defineProperty(this, 'withCredentials', !1),
        (this.id = t);
    });
  function ownKeys$2(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$2(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$2(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$2(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  function getURL(e) {
    return (e = e.startsWith('//')
      ? window.location.protocol + e
      : e).startsWith('http')
      ? new URL(e)
      : new URL(e, window.location.href);
  }
  var MAX_SIZE = 6291456,
    Reason = { EXCEED_SIZE: 'Exceed maximum limit' },
    NetworkPlugin = (function () {
      function u() {
        _classCallCheck(this, u),
          _defineProperty(this, 'name', 'NetworkPlugin'),
          _defineProperty(this, 'xhrOpen', null),
          _defineProperty(this, 'xhrSend', null),
          _defineProperty(this, 'xhrSetRequestHeader', null),
          _defineProperty(this, 'fetch', null),
          _defineProperty(this, 'sendBeacon', null),
          _defineProperty(this, 'reqList', {});
      }
      return (
        _createClass(
          u,
          [
            {
              key: 'onCreated',
              value: function () {
                this.xhrProxy(), this.fetchProxy(), this.sendBeaconProxy();
              },
            },
            {
              key: 'xhrProxy',
              value: function () {
                var e,
                  u,
                  a,
                  n,
                  p = this;
                window.XMLHttpRequest &&
                  ((e = window.XMLHttpRequest.prototype),
                  (u = e.open),
                  (a = e.send),
                  (n = e.setRequestHeader),
                  (this.xhrOpen = u),
                  (this.xhrSend = a),
                  (this.xhrSetRequestHeader = n),
                  (window.XMLHttpRequest.prototype.open = function () {
                    for (
                      var s = this,
                        e = arguments.length,
                        t = new Array(e),
                        r = 0;
                      r < e;
                      r++
                    )
                      t[r] = arguments[r];
                    function n() {
                      p.reqList[c] || (p.reqList[c] = new RequestItem(c));
                      var r = p.reqList[c];
                      r.readyState = s.readyState;
                      var e,
                        t,
                        n = (s.getAllResponseHeaders() || '')
                          .trim()
                          .split(/[\r\n]+/);
                      switch (s.readyState) {
                        case 0:
                        case 1:
                          (r.status = s.status),
                            (r.statusText = 'Pending'),
                            r.startTime || (r.startTime = Date.now());
                          break;
                        case 2:
                          (r.status = s.status),
                            (r.statusText = 'Loading'),
                            (r.responseHeader = {}),
                            n.forEach(function (e) {
                              var e = e.split(': '),
                                t = e.shift(),
                                e = e.join(': ');
                              r.responseHeader[t] = e;
                            });
                          break;
                        case 3:
                          (r.status = s.status), (r.statusText = 'Loading');
                          break;
                        case 4:
                          clearInterval(l),
                            (r.status = s.status),
                            (r.statusText = 'Done'),
                            (r.endTime = Date.now()),
                            (r.costTime =
                              r.endTime - (r.startTime || r.endTime)),
                            (r.response = s.response);
                          break;
                        default:
                          clearInterval(l),
                            (r.status = s.status),
                            (r.statusText = 'Unknown');
                      }
                      switch (s.responseType) {
                        case '':
                        case 'text':
                          if (isString(s.response))
                            try {
                              r.response = JSON.parse(s.response);
                            } catch (e) {
                              r.response = s.response;
                            }
                          else
                            void 0 !== s.response &&
                              (r.response = toStringTag(s.response));
                          break;
                        case 'json':
                          void 0 !== s.response &&
                            (r.response = JSON.stringify(s.response, null, 2));
                          break;
                        case 'blob':
                        case 'arraybuffer':
                          s.response &&
                            (isArrayBuffer((t = s.response)) &&
                              ((e = r.responseHeader['content-type']),
                              (t = new Blob([t], { type: e }))),
                            isBlob(t)) &&
                            (t.size <= MAX_SIZE
                              ? blob2base64(t, function (e) {
                                  isString(e) &&
                                    ((r.response = e),
                                    p.collectRequest(s.pageSpyRequestId, r));
                                })
                              : ((r.response = '[object '.concat(
                                  s.responseType,
                                  ']',
                                )),
                                (r.responseReason = Reason.EXCEED_SIZE)));
                          break;
                        default:
                          void 0 !== s.response &&
                            (r.response = Object.prototype.toString.call(
                              s.response,
                            ));
                      }
                      p.collectRequest(s.pageSpyRequestId, r);
                      for (
                        var o = arguments.length, i = new Array(o), a = 0;
                        a < o;
                        a++
                      )
                        i[a] = arguments[a];
                      return d.apply(s, i);
                    }
                    var o = t[0],
                      i = t[1],
                      c = getRandomId(),
                      l = null,
                      d =
                        ((this.pageSpyRequestId = c),
                        (this.pageSpyRequestMethod = o),
                        (this.pageSpyRequestUrl = i),
                        this.onreadystatechange || function () {}),
                      a = ((s.onreadystatechange = n), -1),
                      l = window.setInterval(function () {
                        a != s.readyState && ((a = s.readyState), n.call(s));
                      }, 10);
                    return u.apply(s, t);
                  }),
                  (window.XMLHttpRequest.prototype.setRequestHeader = function (
                    e,
                    t,
                  ) {
                    var r = p.reqList[this.pageSpyRequestId];
                    return (
                      r &&
                        (r.requestHeader || (r.requestHeader = {}),
                        (r.requestHeader[e] = t)),
                      n.apply(this, [e, t])
                    );
                  }),
                  (window.XMLHttpRequest.prototype.send = function (t) {
                    var e = this,
                      r = e.pageSpyRequestId,
                      r = void 0 === r ? getRandomId() : r,
                      n = e.pageSpyRequestMethod,
                      n = void 0 === n ? 'GET' : n,
                      o = e.pageSpyRequestUrl,
                      o = void 0 === o ? '' : o,
                      i = p.reqList[r] || new RequestItem(r),
                      r = o.split('?') || [];
                    if (
                      ((i.method = n.toUpperCase()),
                      (i.url = o),
                      (i.name = r.shift() || ''),
                      (i.name =
                        i.name.replace(/[/]*$/, '').split('/').pop() || ''),
                      (i.requestType = 'xhr'),
                      (i.responseType = e.responseType),
                      (i.withCredentials = e.withCredentials),
                      0 < r.length &&
                        ((i.name += '?'.concat(r)),
                        (i.getData = {}),
                        r
                          .join('?')
                          .split('&')
                          .forEach(function (e) {
                            var e = _slicedToArray(e.split('='), 2),
                              t = e[0],
                              e = e[1];
                            i.getData[t] = decodeURIComponent(e);
                          })),
                      t && 'POST' === i.method)
                    )
                      if (isString(t))
                        try {
                          i.postData = JSON.parse(t);
                        } catch (e) {
                          i.postData = t;
                        }
                      else
                        isPlainObject(t)
                          ? (i.postData = t)
                          : (i.postData = '[object Object]');
                    return a.apply(e, [t]);
                  }));
              },
            },
            {
              key: 'fetchProxy',
              value: function () {
                var l = this,
                  d = window.fetch;
                d &&
                  ((this.fetch = d),
                  (window.fetch = function (e) {
                    var t,
                      r,
                      n =
                        1 < arguments.length && void 0 !== arguments[1]
                          ? arguments[1]
                          : {},
                      o = (e instanceof URL && (e = e.toJSON()), getRandomId()),
                      i = ((l.reqList[o] = new RequestItem(o)), l.reqList[o]),
                      a = 'GET',
                      s = isString(e)
                        ? ((a = n.method || 'GET'),
                          (t = getURL(e)),
                          (null == n ? void 0 : n.headers) || null)
                        : ((a = e.method || 'GET'),
                          (t = getURL(e.url)),
                          e.headers),
                      c = t.href.split('?') || [],
                      c =
                        ((i.name = c.shift() || ''),
                        (i.name =
                          i.name.replace(/[/]*$/, '').split('/').pop() || ''),
                        (i.method = a.toUpperCase()),
                        (i.url = t.toString()),
                        (i.requestType = 'fetch'),
                        (i.status = 0),
                        (i.statusText = 'Pending'),
                        (i.startTime = Date.now()),
                        n.credentials &&
                          'omit' !== n.credentials &&
                          (i.withCredentials = !0),
                        s instanceof Headers
                          ? ((i.requestHeader = {}),
                            s.forEach(function (e, t) {
                              i.requestHeader[t] = e;
                            }))
                          : (i.requestHeader = s),
                        t.search &&
                          ((i.name += t.search),
                          (i.getData = {}),
                          t.searchParams.forEach(function (e, t) {
                            i.getData[t] = e;
                          })),
                        'POST' === i.method &&
                          (isString(e)
                            ? (i.postData = u.getFormattedBody(
                                null == n ? void 0 : n.body,
                              ))
                            : (i.postData = '[object Object]')),
                        isString(e) ? t.toString() : e);
                    return (
                      l.collectRequest(o, i),
                      d(c, n)
                        .then(function (e) {
                          (r = e),
                            (i.endTime = Date.now()),
                            (i.costTime =
                              i.endTime - (i.startTime || i.endTime)),
                            (i.status = e.status || 200),
                            (i.statusText = e.statusText || 'Done'),
                            (i.responseHeader = {}),
                            e.headers.forEach(function (e, t) {
                              i.responseHeader[t] = e;
                            });
                          var t = e.headers.get('content-type');
                          if (t) {
                            if (t.includes('application/json'))
                              return (
                                (i.responseType = 'json'), e.clone().text()
                              );
                            if (
                              t.includes('text/html') ||
                              t.includes('text/plain')
                            )
                              return (
                                (i.responseType = 'text'), e.clone().text()
                              );
                          }
                          return (i.responseType = 'blob'), e.clone().blob();
                        })
                        .then(function (t) {
                          switch (i.responseType) {
                            case 'text':
                            case 'json':
                              try {
                                i.response = JSON.parse(t);
                              } catch (e) {
                                (i.response = t), (i.responseType = 'text');
                              }
                              break;
                            case 'blob':
                              t.size <= MAX_SIZE
                                ? blob2base64(t, function (e) {
                                    isString(e) &&
                                      ((i.response = e),
                                      l.collectRequest(o, i));
                                  })
                                : ((i.response = '[object Blob]'),
                                  (i.responseReason = Reason.EXCEED_SIZE));
                              break;
                            default:
                              i.response = t;
                          }
                          return r;
                        })
                        .finally(function () {
                          (r = null),
                            (i.readyState = 4),
                            l.collectRequest(o, i);
                        })
                    );
                  }));
              },
            },
            {
              key: 'sendBeaconProxy',
              value: function () {
                var i,
                  a = window.navigator.sendBeacon;
                a &&
                  (((i = this).sendBeacon = a),
                  (window.navigator.sendBeacon = function (e, t) {
                    var r = getRandomId(),
                      n = new RequestItem(r),
                      o = ((i.reqList[r] = n), getURL(e)),
                      o =
                        ((n.name = o.href.split('/').pop() || ''),
                        (n.method = 'POST'),
                        (n.url = e.toString()),
                        (n.status = 0),
                        (n.statusText = 'Pending'),
                        (n.requestType = 'ping'),
                        (n.requestHeader = {
                          'Content-Type': getContentType(t),
                        }),
                        (n.startTime = Date.now()),
                        (n.postData = u.getFormattedBody(t)),
                        (n.response = ''),
                        o.search &&
                          ((n.getData = {}),
                          o.searchParams.forEach(function (e, t) {
                            n.getData[t] = e;
                          })),
                        a.call(window.navigator, e, t));
                    return (
                      o
                        ? ((n.status = 200),
                          (n.statusText = 'Sent'),
                          (n.endTime = Date.now()),
                          (n.costTime = n.endTime - (n.startTime || n.endTime)),
                          (n.readyState = 4))
                        : ((n.status = 500), (n.statusText = 'Unknown')),
                      i.collectRequest(r, n),
                      o
                    );
                  }));
              },
            },
            {
              key: 'collectRequest',
              value: function (e, t) {
                this.reqList[e] || (this.reqList[e] = t);
                e = makeMessage(
                  MESSAGE_TYPE.network,
                  _objectSpread$2({}, t),
                  !1,
                );
                socketStore.broadcastMessage(e);
              },
            },
          ],
          [
            {
              key: 'getFormattedBody',
              value: function (t) {
                if (!t) return null;
                var r = '',
                  e = getPrototypeName(t);
                switch (e) {
                  case 'String':
                    try {
                      r = JSON.parse(t);
                    } catch (e) {
                      r = t;
                    }
                    break;
                  case 'URLSearchParams':
                    (r = {}),
                      t.forEach(function (e, t) {
                        r[t] = e;
                      });
                    break;
                  default:
                    r = '[object '.concat(e, ']');
                }
                return r;
              },
            },
          ],
        ),
        u
      );
    })();
  function getOS() {
    var e = navigator.userAgent,
      t = 'Win32' === navigator.platform || 'Windows' === navigator.platform,
      r =
        'Mac68K' === navigator.platform ||
        'MacPPC' === navigator.platform ||
        'Macintosh' === navigator.platform ||
        'MacIntel' === navigator.platform,
      n = e.match('iPad'),
      o = e.match('iPhone'),
      i = 'X11' === navigator.platform && !t && !r,
      a = -1 < String(navigator.platform).indexOf('Linux'),
      s = e.match('Android'),
      c = e.match('Windows CE') || e.match('WinCE') || e.match('WindowsCE'),
      l = e.match('Windows Mobile'),
      d = e.match('Windows Phone OS');
    if (n || o) return 'IOS';
    if (r) return 'Mac';
    if (i) return 'Unix';
    if (a) return s ? 'Android' : 'Linux';
    if (c) return 'Windows CE';
    if (l) return 'Windows Mobile';
    if (d) return 'Windows Phone';
    if (e.match('BlackBerry')) return 'BlackBerry OS';
    if (e.match('RIM Tablet OS')) return 'BlackBerry Tablet OS';
    if (e.match('(?:web|hpw)OS')) return 'webOS';
    if (e.match('SymbianOS/9.1') || e.match('Series[ ]?60') || e.match('S60'))
      return 'Series60';
    if (t) {
      if (-1 < e.indexOf('Windows NT 5.0') || -1 < e.indexOf('Windows 2000'))
        return 'Win2000';
      if (-1 < e.indexOf('Windows NT 5.1') || -1 < e.indexOf('Windows XP'))
        return 'WinXP';
      if (-1 < e.indexOf('Windows NT 5.2') || -1 < e.indexOf('Windows 2003'))
        return 'Win2003';
      if (-1 < e.indexOf('Windows NT 6.0') || -1 < e.indexOf('Windows Vista'))
        return 'WinVista';
      if (-1 < e.indexOf('Windows NT 6.1') || -1 < e.indexOf('Windows 7'))
        return 'Win7';
      if (-1 < e.indexOf('Windows NT 6.2') || -1 < e.indexOf('Windows 8'))
        return 'Win8';
    }
    return 'other';
  }
  function getBrowser() {
    var e,
      t = navigator.userAgent,
      r =
        t.match(
          /(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i,
        ) || [];
    return t.match('MicroMessenger')
      ? 'Weixin'
      : /trident/i.test(r[1])
      ? ((e = /\brv[ :]+(\d+)/g.exec(t) || []), 'IE '.concat(e[1] || ''))
      : 'Chrome' === r[1] && null != (e = t.match(/\b(OPR|Edge)\/(\d+)/))
      ? e.slice(1).join(' ').replace('OPR', 'Opera')
      : ((r = r[2]
          ? [r[1], r[2]]
          : [navigator.appName, navigator.appVersion, '-?']),
        null != (e = t.match(/version\/(\d+)/i)) && r.splice(1, 1, e[1]),
        r.join(':'));
  }
  var modernizrExports = {},
    modernizr = {
      get exports() {
        return modernizrExports;
      },
      set exports(e) {
        modernizrExports = e;
      },
    },
    FEATURE_MAP =
      (!(function (module) {
        !(function (scriptGlobalObject, window, document, undefined$1) {
          function is(e, t) {
            return _typeof$1(e) === t;
          }
          function testRunner() {
            var e, t, r, n, o, i, a;
            for (a in tests)
              if (tests.hasOwnProperty(a)) {
                if (
                  ((e = []),
                  (t = tests[a]).name &&
                    (e.push(t.name.toLowerCase()), t.options) &&
                    t.options.aliases &&
                    t.options.aliases.length)
                )
                  for (r = 0; r < t.options.aliases.length; r++)
                    e.push(t.options.aliases[r].toLowerCase());
                for (
                  n = is(t.fn, 'function') ? t.fn() : t.fn, o = 0;
                  o < e.length;
                  o++
                )
                  1 === (i = e[o].split('.')).length
                    ? (Modernizr[i[0]] = n)
                    : ((Modernizr[i[0]] &&
                        (!Modernizr[i[0]] ||
                          Modernizr[i[0]] instanceof Boolean)) ||
                        (Modernizr[i[0]] = new Boolean(Modernizr[i[0]])),
                      (Modernizr[i[0]][i[1]] = n)),
                    classes.push((n ? '' : 'no-') + i.join('-'));
              }
          }
          function setClasses(e) {
            var t,
              r = docElement.className,
              n = Modernizr._config.classPrefix || '';
            isSVG && (r = r.baseVal),
              Modernizr._config.enableJSClass &&
                ((t = new RegExp('(^|\\s)' + n + 'no-js(\\s|$)')),
                (r = r.replace(t, '$1' + n + 'js$2'))),
              Modernizr._config.enableClasses &&
                (0 < e.length && (r += ' ' + n + e.join(' ' + n)),
                isSVG
                  ? (docElement.className.baseVal = r)
                  : (docElement.className = r));
          }
          function addTest(e, t) {
            if ('object' == _typeof$1(e))
              for (var r in e) hasOwnProp(e, r) && addTest(r, e[r]);
            else {
              var n = (e = e.toLowerCase()).split('.'),
                o = Modernizr[n[0]];
              if (void 0 !== (o = 2 === n.length ? o[n[1]] : o))
                return Modernizr;
              (t = 'function' == typeof t ? t() : t),
                1 === n.length
                  ? (Modernizr[n[0]] = t)
                  : (!Modernizr[n[0]] ||
                      Modernizr[n[0]] instanceof Boolean ||
                      (Modernizr[n[0]] = new Boolean(Modernizr[n[0]])),
                    (Modernizr[n[0]][n[1]] = t)),
                setClasses([(t && !1 !== t ? '' : 'no-') + n.join('-')]),
                Modernizr._trigger(e, t);
            }
            return Modernizr;
          }
          function createElement() {
            return 'function' != typeof document.createElement
              ? document.createElement(arguments[0])
              : isSVG
              ? document.createElementNS.call(
                  document,
                  'http://www.w3.org/2000/svg',
                  arguments[0],
                )
              : document.createElement.apply(document, arguments);
          }
          function getBody() {
            var e = document.body;
            return (
              e || ((e = createElement(isSVG ? 'svg' : 'body')).fake = !0), e
            );
          }
          function injectElementWithStyles(e, t, r, n) {
            var o,
              i,
              a,
              s = 'modernizr',
              c = createElement('div'),
              l = getBody();
            if (parseInt(r, 10))
              for (; r--; )
                ((i = createElement('div')).id = n ? n[r] : s + (r + 1)),
                  c.appendChild(i);
            return (
              ((o = createElement('style')).type = 'text/css'),
              (o.id = 's' + s),
              (l.fake ? l : c).appendChild(o),
              l.appendChild(c),
              o.styleSheet
                ? (o.styleSheet.cssText = e)
                : o.appendChild(document.createTextNode(e)),
              (c.id = s),
              l.fake &&
                ((l.style.background = ''),
                (l.style.overflow = 'hidden'),
                (a = docElement.style.overflow),
                (docElement.style.overflow = 'hidden'),
                docElement.appendChild(l)),
              (o = t(c, e)),
              l.fake && l.parentNode
                ? (l.parentNode.removeChild(l),
                  (docElement.style.overflow = a),
                  docElement.offsetHeight)
                : c.parentNode.removeChild(c),
              !!o
            );
          }
          function computedStyle(e, t, r) {
            var n, o;
            return (
              'getComputedStyle' in window
                ? ((n = getComputedStyle.call(window, e, t)),
                  (o = window.console),
                  null !== n
                    ? r && (n = n.getPropertyValue(r))
                    : o &&
                      o[o.error ? 'error' : 'log'].call(
                        o,
                        'getComputedStyle returning null, its possible modernizr test results are inaccurate',
                      ))
                : (n = !t && e.currentStyle && e.currentStyle[r]),
              n
            );
          }
          function contains(e, t) {
            return ~('' + e).indexOf(t);
          }
          function domToCSS(e) {
            return e
              .replace(/([A-Z])/g, function (e, t) {
                return '-' + t.toLowerCase();
              })
              .replace(/^ms-/, '-ms-');
          }
          function nativeTestProps(e, t) {
            var r = e.length;
            if ('CSS' in window && 'supports' in window.CSS) {
              for (; r--; )
                if (window.CSS.supports(domToCSS(e[r]), t)) return !0;
              return !1;
            }
            if ('CSSSupportsRule' in window) {
              for (var n = []; r--; )
                n.push('(' + domToCSS(e[r]) + ':' + t + ')');
              return injectElementWithStyles(
                '@supports (' +
                  (n = n.join(' or ')) +
                  ') { #modernizr { position: absolute; } }',
                function (e) {
                  return 'absolute' === computedStyle(e, null, 'position');
                },
              );
            }
            return undefined$1;
          }
          function cssToDOM(e) {
            return e
              .replace(/([a-z])-([a-z])/g, function (e, t, r) {
                return t + r.toUpperCase();
              })
              .replace(/^-/, '');
          }
          function testProps(e, t, r, n) {
            function o() {
              a && (delete mStyle.style, delete mStyle.modElem);
            }
            if (((n = !is(n, 'undefined') && n), !is(r, 'undefined'))) {
              var i = nativeTestProps(e, r);
              if (!is(i, 'undefined')) return i;
            }
            for (
              var a, s, c, l, d, u = ['modernizr', 'tspan', 'samp'];
              !mStyle.style && u.length;

            )
              (a = !0),
                (mStyle.modElem = createElement(u.shift())),
                (mStyle.style = mStyle.modElem.style);
            for (c = e.length, s = 0; s < c; s++)
              if (
                ((l = e[s]),
                (d = mStyle.style[l]),
                contains(l, '-') && (l = cssToDOM(l)),
                mStyle.style[l] !== undefined$1)
              ) {
                if (n || is(r, 'undefined')) return o(), 'pfx' !== t || l;
                try {
                  mStyle.style[l] = r;
                } catch (e) {}
                if (mStyle.style[l] !== d) return o(), 'pfx' !== t || l;
              }
            return o(), !1;
          }
          function fnBind(e, t) {
            return function () {
              return e.apply(t, arguments);
            };
          }
          function testDOMProps(e, t, r) {
            var n, o;
            for (o in e)
              if (e[o] in t)
                return !1 === r
                  ? e[o]
                  : ((n = t[e[o]]), is(n, 'function') ? fnBind(n, r || t) : n);
            return !1;
          }
          function testPropsAll(e, t, r, n, o) {
            var i = e.charAt(0).toUpperCase() + e.slice(1),
              a = (e + ' ' + cssomPrefixes.join(i + ' ') + i).split(' ');
            return is(t, 'string') || is(t, 'undefined')
              ? testProps(a, t, n, o)
              : testDOMProps(
                  (e + ' ' + domPrefixes.join(i + ' ') + i).split(' '),
                  t,
                  r,
                );
          }
          function testAllProps(e, t, r) {
            return testPropsAll(e, undefined$1, undefined$1, t, r);
          }
          function detectDeleteDatabase(e, t) {
            e = e.deleteDatabase(t);
            (e.onsuccess = function () {
              addTest('indexeddb.deletedatabase', !0);
            }),
              (e.onerror = function () {
                addTest('indexeddb.deletedatabase', !1);
              });
          }
          var tests = [],
            ModernizrProto = {
              _version: '4.0.0-alpha',
              _config: {
                classPrefix: '',
                enableClasses: !1,
                enableJSClass: !0,
                usePrefixes: !0,
              },
              _q: [],
              on: function (e, t) {
                var r = this;
                setTimeout(function () {
                  t(r[e]);
                }, 0);
              },
              addTest: function (e, t, r) {
                tests.push({ name: e, fn: t, options: r });
              },
              addAsyncTest: function (e) {
                tests.push({ name: null, fn: e });
              },
            },
            Modernizr = function () {},
            classes =
              ((Modernizr.prototype = ModernizrProto),
              (Modernizr = new Modernizr()),
              []),
            docElement = document.documentElement,
            isSVG = 'svg' === docElement.nodeName.toLowerCase(),
            hasOwnProp,
            omPrefixes =
              (!(function () {
                var r = {}.hasOwnProperty;
                hasOwnProp =
                  is(r, 'undefined') || is(r.call, 'undefined')
                    ? function (e, t) {
                        return (
                          t in e && is(e.constructor.prototype[t], 'undefined')
                        );
                      }
                    : function (e, t) {
                        return r.call(e, t);
                      };
              })(),
              (ModernizrProto._l = {}),
              (ModernizrProto.on = function (e, t) {
                this._l[e] || (this._l[e] = []),
                  this._l[e].push(t),
                  Modernizr.hasOwnProperty(e) &&
                    setTimeout(function () {
                      Modernizr._trigger(e, Modernizr[e]);
                    }, 0);
              }),
              (ModernizrProto._trigger = function (e, t) {
                var r;
                this._l[e] &&
                  ((r = this._l[e]),
                  setTimeout(function () {
                    for (var e = 0; e < r.length; e++) (0, r[e])(t);
                  }, 0),
                  delete this._l[e]);
              }),
              Modernizr._q.push(function () {
                ModernizrProto.addTest = addTest;
              }),
              'Moz O ms Webkit'),
            cssomPrefixes = ModernizrProto._config.usePrefixes
              ? omPrefixes.split(' ')
              : [],
            atRule =
              ((ModernizrProto._cssomPrefixes = cssomPrefixes),
              function (e) {
                var t,
                  r = prefixes.length,
                  n = window.CSSRule;
                if (void 0 === n) return undefined$1;
                if (e) {
                  if (
                    (t =
                      (e = e.replace(/^@/, ''))
                        .replace(/-/g, '_')
                        .toUpperCase() + '_RULE') in n
                  )
                    return '@' + e;
                  for (var o = 0; o < r; o++) {
                    var i = prefixes[o];
                    if (i.toUpperCase() + '_' + t in n)
                      return '@-' + i.toLowerCase() + '-' + e;
                  }
                }
                return !1;
              }),
            domPrefixes =
              ((ModernizrProto.atRule = atRule),
              ModernizrProto._config.usePrefixes
                ? omPrefixes.toLowerCase().split(' ')
                : []),
            hasEvent =
              ((ModernizrProto._domPrefixes = domPrefixes),
              (function () {
                var n = !('onblur' in docElement);
                return function (e, t) {
                  var r;
                  return (
                    !!e &&
                    (!(r =
                      (e = 'on' + e) in
                      (t =
                        t && 'string' != typeof t
                          ? t
                          : createElement(t || 'div'))) &&
                      n &&
                      ((t = t.setAttribute
                        ? t
                        : createElement('div')).setAttribute(e, ''),
                      (r = 'function' == typeof t[e]),
                      t[e] !== undefined$1 && (t[e] = undefined$1),
                      t.removeAttribute(e)),
                    r)
                  );
                };
              })()),
            err =
              ((ModernizrProto.hasEvent = hasEvent),
              isSVG ||
                (function (e, a) {
                  function u(e, t) {
                    var r = e.createElement('p'),
                      e =
                        e.getElementsByTagName('head')[0] || e.documentElement;
                    return (
                      (r.innerHTML = 'x<style>' + t + '</style>'),
                      e.insertBefore(r.lastChild, e.firstChild)
                    );
                  }
                  function p() {
                    var e = v.elements;
                    return 'string' == typeof e ? e.split(' ') : e;
                  }
                  function f(e) {
                    var t = h[e[d]];
                    return t || ((t = {}), y++, (e[d] = y), (h[y] = t)), t;
                  }
                  function o(e, t, r) {
                    return (
                      (t = t || a),
                      s
                        ? t.createElement(e)
                        : !(t = (r = r || f(t)).cache[e]
                            ? r.cache[e].cloneNode()
                            : l.test(e)
                            ? (r.cache[e] = r.createElem(e)).cloneNode()
                            : r.createElem(e)).canHaveChildren ||
                          c.test(e) ||
                          t.tagUrn
                        ? t
                        : r.frag.appendChild(t)
                    );
                  }
                  function n(e) {
                    var t,
                      r,
                      n = f((e = e || a));
                    return (
                      !v.shivCSS ||
                        i ||
                        n.hasCSS ||
                        (n.hasCSS = !!u(
                          e,
                          'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}',
                        )),
                      s ||
                        ((t = e),
                        (r = n).cache ||
                          ((r.cache = {}),
                          (r.createElem = t.createElement),
                          (r.createFrag = t.createDocumentFragment),
                          (r.frag = r.createFrag())),
                        (t.createElement = function (e) {
                          return v.shivMethods ? o(e, t, r) : r.createElem(e);
                        }),
                        (t.createDocumentFragment = Function(
                          'h,f',
                          'return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(' +
                            p()
                              .join()
                              .replace(/[\w\-:]+/g, function (e) {
                                return (
                                  r.createElem(e),
                                  r.frag.createElement(e),
                                  'c("' + e + '")'
                                );
                              }) +
                            ');return n}',
                        )(v, r.frag))),
                      e
                    );
                  }
                  function m(e) {
                    for (
                      var t,
                        r = e.getElementsByTagName('*'),
                        n = r.length,
                        o = RegExp('^(?:' + p().join('|') + ')$', 'i'),
                        i = [];
                      n--;

                    )
                      (t = r[n]),
                        o.test(t.nodeName) &&
                          i.push(
                            t.applyElement(
                              (function (e) {
                                for (
                                  var t,
                                    r = e.attributes,
                                    n = r.length,
                                    o = e.ownerDocument.createElement(
                                      w + ':' + e.nodeName,
                                    );
                                  n--;

                                )
                                  (t = r[n]).specified &&
                                    o.setAttribute(t.nodeName, t.nodeValue);
                                return (o.style.cssText = e.style.cssText), o;
                              })(t),
                            ),
                          );
                    return i;
                  }
                  function t(s) {
                    function c() {
                      clearTimeout(r._removeSheetTimer),
                        l && l.removeNode(!0),
                        (l = null);
                    }
                    var l,
                      d,
                      r = f(s),
                      e = s.namespaces,
                      t = s.parentWindow;
                    return (
                      !E ||
                        s.printShived ||
                        (void 0 === e[w] && e.add(w),
                        t.attachEvent('onbeforeprint', function () {
                          c();
                          for (
                            var e,
                              t,
                              r,
                              n = s.styleSheets,
                              o = [],
                              i = n.length,
                              a = Array(i);
                            i--;

                          )
                            a[i] = n[i];
                          for (; (r = a.pop()); )
                            if (!r.disabled && b.test(r.media)) {
                              try {
                                t = (e = r.imports).length;
                              } catch (e) {
                                t = 0;
                              }
                              for (i = 0; i < t; i++) a.push(e[i]);
                              try {
                                o.push(r.cssText);
                              } catch (e) {}
                            }
                          (o = (function (e) {
                            for (
                              var t,
                                r = e.split('{'),
                                n = r.length,
                                o = RegExp(
                                  '(^|[\\s,>+~])(' +
                                    p().join('|') +
                                    ')(?=[[\\s,>+~#.:]|$)',
                                  'gi',
                                ),
                                i = '$1' + w + '\\:$2';
                              n--;

                            )
                              ((t = r[n] = r[n].split('}'))[t.length - 1] = t[
                                t.length - 1
                              ].replace(o, i)),
                                (r[n] = t.join('}'));
                            return r.join('{');
                          })(o.reverse().join(''))),
                            (d = m(s)),
                            (l = u(s, o));
                        }),
                        t.attachEvent('onafterprint', function () {
                          for (var e = d, t = e.length; t--; )
                            e[t].removeNode();
                          clearTimeout(r._removeSheetTimer),
                            (r._removeSheetTimer = setTimeout(c, 500));
                        }),
                        (s.printShived = !0)),
                      s
                    );
                  }
                  var i,
                    s,
                    r = e.html5 || {},
                    c =
                      /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
                    l =
                      /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
                    d = '_html5shiv',
                    y = 0,
                    h = {};
                  try {
                    var g = a.createElement('a');
                    (g.innerHTML = '<xyz></xyz>'),
                      (i = 'hidden' in g),
                      (s =
                        1 == g.childNodes.length ||
                        (a.createElement('a'),
                        void 0 ===
                          (A = a.createDocumentFragment()).cloneNode) ||
                        void 0 === A.createDocumentFragment ||
                        void 0 === A.createElement);
                  } catch (g) {
                    s = i = !0;
                  }
                  var A,
                    v = {
                      elements:
                        r.elements ||
                        'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video',
                      version: '3.7.3',
                      shivCSS: !1 !== r.shivCSS,
                      supportsUnknownElements: s,
                      shivMethods: !1 !== r.shivMethods,
                      type: 'default',
                      shivDocument: n,
                      createElement: o,
                      createDocumentFragment: function (e, t) {
                        if (((e = e || a), s))
                          return e.createDocumentFragment();
                        for (
                          var r = (t = t || f(e)).frag.cloneNode(),
                            n = 0,
                            o = p(),
                            i = o.length;
                          n < i;
                          n++
                        )
                          r.createElement(o[n]);
                        return r;
                      },
                      addElements: function (e, t) {
                        var r = v.elements;
                        'string' != typeof r && (r = r.join(' ')),
                          'string' != typeof e && (e = e.join(' ')),
                          (v.elements = r + ' ' + e),
                          n(t);
                      },
                    },
                    b = ((e.html5 = v), n(a), /^$|\b(?:all|print)\b/),
                    w = 'html5shiv',
                    E = !(
                      s ||
                      ((A = a.documentElement), void 0 === a.namespaces) ||
                      void 0 === a.parentWindow ||
                      void 0 === A.applyElement ||
                      void 0 === A.removeNode ||
                      void 0 === e.attachEvent
                    );
                  (v.type += ' print'),
                    (v.shivPrint = t)(a),
                    module.exports && (module.exports = v);
                })(void 0 !== window ? window : this, document),
              function () {}),
            warn = function () {},
            mq =
              (window.console &&
                ((err = function () {
                  var e = console.error ? 'error' : 'log';
                  window.console[e].apply(
                    window.console,
                    Array.prototype.slice.call(arguments),
                  );
                }),
                (warn = function () {
                  var e = console.warn ? 'warn' : 'log';
                  window.console[e].apply(
                    window.console,
                    Array.prototype.slice.call(arguments),
                  );
                })),
              (ModernizrProto.load = function () {
                'yepnope' in window
                  ? (warn(
                      'yepnope.js (aka Modernizr.load) is no longer included as part of Modernizr. yepnope appears to be available on the page, so we’ll use it to handle this call to Modernizr.load, but please update your code to use yepnope directly.\n See http://github.com/Modernizr/Modernizr/issues/1182 for more information.',
                    ),
                    window.yepnope.apply(window, [].slice.call(arguments, 0)))
                  : err(
                      'yepnope.js (aka Modernizr.load) is no longer included as part of Modernizr. Get it from http://yepnopejs.com. See http://github.com/Modernizr/Modernizr/issues/1182 for more information.',
                    );
              }),
              (function () {
                var t = window.matchMedia || window.msMatchMedia;
                return t
                  ? function (e) {
                      e = t(e);
                      return (e && e.matches) || !1;
                    }
                  : function (e) {
                      var t = !1;
                      return (
                        injectElementWithStyles(
                          '@media ' +
                            e +
                            ' { #modernizr { position: absolute; } }',
                          function (e) {
                            t =
                              'absolute' === computedStyle(e, null, 'position');
                          },
                        ),
                        t
                      );
                    };
              })()),
            modElem =
              ((ModernizrProto.mq = mq), { elem: createElement('modernizr') }),
            mStyle =
              (Modernizr._q.push(function () {
                delete modElem.elem;
              }),
              { style: modElem.elem.style }),
            prefixed =
              (Modernizr._q.unshift(function () {
                delete mStyle.style;
              }),
              (ModernizrProto.testAllProps = testPropsAll),
              (ModernizrProto.prefixed = function (e, t, r) {
                return 0 === e.indexOf('@')
                  ? atRule(e)
                  : (-1 !== e.indexOf('-') && (e = cssToDOM(e)),
                    t ? testPropsAll(e, t, r) : testPropsAll(e, 'pfx'));
              })),
            prefixes = ModernizrProto._config.usePrefixes
              ? ' -webkit- -moz- -o- -ms- '.split(' ')
              : ['', ''],
            domPrefixesAll =
              ((ModernizrProto._prefixes = prefixes),
              (ModernizrProto.prefixedCSS = function (e) {
                e = prefixed(e);
                return e && domToCSS(e);
              }),
              (ModernizrProto.testAllProps = testAllProps),
              (ModernizrProto.testProp = function (e, t, r) {
                return testProps([e], undefined$1, t, r);
              }),
              (ModernizrProto.testStyles = injectElementWithStyles),
              Modernizr.addAsyncTest(function () {
                var e,
                  t = ['read', 'readText', 'write', 'writeText'];
                if (navigator.clipboard) {
                  addTest('clipboard', !0);
                  for (var r = 0; r < t.length; r++)
                    (e = !!navigator.clipboard[t[r]]),
                      addTest('clipboard.' + t[r].toLowerCase(), e);
                } else addTest('clipboard', !1);
              }),
              Modernizr.addTest(
                'contextmenu',
                'contextMenu' in docElement && 'HTMLMenuItemElement' in window,
              ),
              Modernizr.addTest(
                'cors',
                'XMLHttpRequest' in window &&
                  'withCredentials' in new XMLHttpRequest(),
              ),
              Modernizr.addTest(
                'es6array',
                !!(
                  Array.prototype &&
                  Array.prototype.copyWithin &&
                  Array.prototype.fill &&
                  Array.prototype.find &&
                  Array.prototype.findIndex &&
                  Array.prototype.keys &&
                  Array.prototype.entries &&
                  Array.prototype.values &&
                  Array.from &&
                  Array.of
                ),
              ),
              Modernizr.addTest('arrow', function () {
                try {
                  eval('()=>{}');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest('es6class', function () {
                try {
                  eval('class A{}');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest(
                'es6collections',
                !!(
                  window.Map &&
                  window.Set &&
                  window.WeakMap &&
                  window.WeakSet
                ),
              ),
              Modernizr.addTest('generators', function () {
                try {
                  new Function('function* test() {}')();
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest(
                'es6math',
                !!(
                  Math &&
                  Math.clz32 &&
                  Math.cbrt &&
                  Math.imul &&
                  Math.sign &&
                  Math.log10 &&
                  Math.log2 &&
                  Math.log1p &&
                  Math.expm1 &&
                  Math.cosh &&
                  Math.sinh &&
                  Math.tanh &&
                  Math.acosh &&
                  Math.asinh &&
                  Math.atanh &&
                  Math.hypot &&
                  Math.trunc &&
                  Math.fround
                ),
              ),
              Modernizr.addTest(
                'es6number',
                !!(
                  Number.isFinite &&
                  Number.isInteger &&
                  Number.isSafeInteger &&
                  Number.isNaN &&
                  Number.parseInt &&
                  Number.parseFloat &&
                  Number.isInteger(Number.MAX_SAFE_INTEGER) &&
                  Number.isInteger(Number.MIN_SAFE_INTEGER) &&
                  Number.isFinite(Number.EPSILON)
                ),
              ),
              Modernizr.addTest(
                'es6object',
                !!(Object.assign && Object.is && Object.setPrototypeOf),
              ),
              Modernizr.addTest('promises', function () {
                return (
                  'Promise' in window &&
                  'resolve' in window.Promise &&
                  'reject' in window.Promise &&
                  'all' in window.Promise &&
                  'race' in window.Promise &&
                  (new window.Promise(function (e) {
                    t = e;
                  }),
                  'function' == typeof t)
                );
                var t;
              }),
              Modernizr.addTest('restparameters', function () {
                try {
                  eval('function f(...rest) {}');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest('spreadarray', function () {
                try {
                  eval('(function f(){})(...[1])');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest('stringtemplate', function () {
                try {
                  return (
                    '-1-' === eval('(function(){var a=1; return `-${a}-`;})()')
                  );
                } catch (e) {
                  return !1;
                }
              }),
              Modernizr.addTest(
                'es6string',
                !!(
                  String.fromCodePoint &&
                  String.raw &&
                  String.prototype.codePointAt &&
                  String.prototype.repeat &&
                  String.prototype.startsWith &&
                  String.prototype.endsWith &&
                  String.prototype.includes
                ),
              ),
              Modernizr.addTest(
                'es6symbol',
                !!(
                  'function' == typeof Symbol &&
                  Symbol.for &&
                  Symbol.hasInstance &&
                  Symbol.isConcatSpreadable &&
                  Symbol.iterator &&
                  Symbol.keyFor &&
                  Symbol.match &&
                  Symbol.prototype &&
                  Symbol.replace &&
                  Symbol.search &&
                  Symbol.species &&
                  Symbol.split &&
                  Symbol.toPrimitive &&
                  Symbol.toStringTag &&
                  Symbol.unscopables
                ),
              ),
              Modernizr.addTest(
                'es7array',
                !(!Array.prototype || !Array.prototype.includes),
              ),
              Modernizr.addTest('restdestructuringarray', function () {
                try {
                  eval('var [...rest]=[1]');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest('restdestructuringobject', function () {
                try {
                  eval('var {...rest}={a:1}');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest('spreadobject', function () {
                try {
                  eval('var a={...{b:1}}');
                } catch (e) {
                  return !1;
                }
                return !0;
              }),
              Modernizr.addTest(
                'es8object',
                !(!Object.entries || !Object.values),
              ),
              Modernizr.addTest(
                'customevent',
                'CustomEvent' in window &&
                  'function' == typeof window.CustomEvent,
              ),
              Modernizr.addTest('eventlistener', 'addEventListener' in window),
              Modernizr.addTest('forcetouch', function () {
                return (
                  !!hasEvent(
                    prefixed('mouseforcewillbegin', window, !1),
                    window,
                  ) &&
                  MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN &&
                  MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN
                );
              }),
              Modernizr.addTest('hashchange', function () {
                return (
                  !1 !== hasEvent('hashchange', window) &&
                  (document.documentMode === undefined$1 ||
                    7 < document.documentMode)
                );
              }),
              Modernizr.addTest('oninput', function () {
                var e = createElement('input');
                if (
                  (e.setAttribute('oninput', 'return'),
                  (e.style.cssText = 'position:fixed;top:0;'),
                  hasEvent('oninput', docElement) ||
                    'function' == typeof e.oninput)
                )
                  return !0;
                try {
                  var t = document.createEvent('KeyboardEvent'),
                    r = !1,
                    n = function (e) {
                      (r = !0), e.preventDefault(), e.stopPropagation();
                    };
                  t.initKeyEvent(
                    'keypress',
                    !0,
                    !0,
                    window,
                    !1,
                    !1,
                    !1,
                    !1,
                    0,
                    'e'.charCodeAt(0),
                  ),
                    docElement.appendChild(e),
                    e.addEventListener('input', n, !1),
                    e.focus(),
                    e.dispatchEvent(t),
                    e.removeEventListener('input', n, !1),
                    docElement.removeChild(e);
                } catch (e) {
                  r = !1;
                }
                return r;
              }),
              [''].concat(domPrefixes)),
            bool =
              ((ModernizrProto._domPrefixesAll = domPrefixesAll),
              Modernizr.addTest('pointerevents', function () {
                for (var e = 0, t = domPrefixesAll.length; e < t; e++)
                  if (hasEvent(domPrefixesAll[e] + 'pointerdown')) return !0;
                return !1;
              }),
              Modernizr.addTest('history', function () {
                var e = navigator.userAgent;
                return (
                  !!e &&
                  ((-1 === e.indexOf('Android 2.') &&
                    -1 === e.indexOf('Android 4.0')) ||
                    -1 === e.indexOf('Mobile Safari') ||
                    -1 !== e.indexOf('Chrome') ||
                    -1 !== e.indexOf('Windows Phone') ||
                    'file:' === location.protocol) &&
                  window.history &&
                  'pushState' in window.history
                );
              }),
              Modernizr.addTest(
                'sandbox',
                'sandbox' in createElement('iframe'),
              ),
              Modernizr.addTest(
                'seamless',
                'seamless' in createElement('iframe'),
              ),
              Modernizr.addTest('srcdoc', 'srcdoc' in createElement('iframe')),
              Modernizr.addTest('canvas', function () {
                var e = createElement('canvas');
                return !(!e.getContext || !e.getContext('2d'));
              }),
              Modernizr.addAsyncTest(function () {
                if (!Modernizr.canvas) return !1;
                var e = new Image(),
                  t = createElement('canvas'),
                  r = t.getContext('2d');
                (e.onload = function () {
                  addTest('apng', function () {
                    return (
                      void 0 !== t.getContext &&
                      (r.drawImage(e, 0, 0),
                      0 === r.getImageData(0, 0, 1, 1).data[3])
                    );
                  });
                }),
                  (e.src =
                    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg==');
              }),
              Modernizr.addAsyncTest(function () {
                var e = new Image();
                (e.onload = e.onerror =
                  function () {
                    addTest('avif', 1 === e.width);
                  }),
                  (e.src =
                    'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAEcbWV0YQAAAAAAAABIaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGNhdmlmIC0gaHR0cHM6Ly9naXRodWIuY29tL2xpbmstdS9jYXZpZgAAAAAeaWxvYwAAAAAEQAABAAEAAAAAAUQAAQAAABcAAAAqaWluZgEAAAAAAAABAAAAGmluZmUCAAAAAAEAAGF2MDFJbWFnZQAAAAAOcGl0bQAAAAAAAQAAAHJpcHJwAAAAUmlwY28AAAAQcGFzcAAAAAEAAAABAAAAFGlzcGUAAAAAAAAAAQAAAAEAAAAQcGl4aQAAAAADCAgIAAAAFmF2MUOBAAwACggYAAYICGgIIAAAABhpcG1hAAAAAAAAAAEAAQUBAoMDhAAAAB9tZGF0CggYAAYICGgIIBoFHiAAAEQiBACwDoA=');
              }),
              Modernizr.addTest(
                'imgcrossorigin',
                'crossOrigin' in createElement('img'),
              ),
              Modernizr.addAsyncTest(function () {
                var e = new Image();
                (e.onerror = function () {
                  addTest('exiforientation', !1);
                }),
                  (e.onload = function () {
                    addTest('exiforientation', 2 !== e.width);
                  }),
                  (e.src =
                    'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q==');
              }),
              Modernizr.addAsyncTest(function () {
                var e = new Image();
                (e.onload = e.onerror =
                  function () {
                    addTest('jpeg2000', 1 === e.width);
                  }),
                  (e.src =
                    'data:image/jp2;base64,/0//UQAyAAAAAAABAAAAAgAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAEBwEBBwEBBwEBBwEB/1IADAAAAAEAAAQEAAH/XAAEQED/ZAAlAAFDcmVhdGVkIGJ5IE9wZW5KUEVHIHZlcnNpb24gMi4wLjD/kAAKAAAAAABYAAH/UwAJAQAABAQAAf9dAAUBQED/UwAJAgAABAQAAf9dAAUCQED/UwAJAwAABAQAAf9dAAUDQED/k8+kEAGvz6QQAa/PpBABr994EAk//9k=');
              }),
              Modernizr.addTest(
                'lazyloading',
                'loading' in HTMLImageElement.prototype,
              ),
              Modernizr.addAsyncTest(function () {
                function r(r, e, n) {
                  function t(e) {
                    var t = !(!e || 'load' !== e.type) && 1 === o.width;
                    addTest(r, 'webp' === r && t ? new Boolean(t) : t),
                      n && n(e);
                  }
                  var o = new Image();
                  (o.onerror = t), (o.onload = t), (o.src = e);
                }
                var n = [
                    {
                      uri: 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=',
                      name: 'webp',
                    },
                    {
                      uri: 'data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==',
                      name: 'webp.alpha',
                    },
                    {
                      uri: 'data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA',
                      name: 'webp.animation',
                    },
                    {
                      uri: 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=',
                      name: 'webp.lossless',
                    },
                  ],
                  e = n.shift();
                r(e.name, e.uri, function (e) {
                  if (e && 'load' === e.type)
                    for (var t = 0; t < n.length; t++) r(n[t].name, n[t].uri);
                });
              }),
              Modernizr.addTest('messagechannel', 'MessageChannel' in window),
              Modernizr.addTest('beacon', 'sendBeacon' in navigator),
              Modernizr.addTest('fetch', 'fetch' in window),
              Modernizr.addTest(
                'performance',
                !!prefixed('performance', window),
              ),
              !0);
          try {
            window.postMessage(
              {
                toString: function () {
                  bool = !1;
                },
              },
              '*',
            );
          } catch (e) {}
          Modernizr.addTest(
            'postmessage',
            new Boolean('postMessage' in window),
          ),
            Modernizr.addTest('postmessage.structuredclones', bool),
            Modernizr.addTest('proxy', 'Proxy' in window),
            Modernizr.addTest(
              'queryselector',
              'querySelector' in document && 'querySelectorAll' in document,
            ),
            Modernizr.addTest('prefetch', function () {
              var e;
              return (
                11 === document.documentMode ||
                (!(!(e = createElement('link').relList) || !e.supports) &&
                  e.supports('prefetch'))
              );
            }),
            Modernizr.addTest(
              'requestanimationframe',
              !!prefixed('requestAnimationFrame', window),
              { aliases: ['raf'] },
            ),
            Modernizr.addTest(
              'scriptasync',
              'async' in createElement('script'),
            ),
            Modernizr.addTest(
              'scriptdefer',
              'defer' in createElement('script'),
            ),
            Modernizr.addTest('serviceworker', 'serviceWorker' in navigator),
            Modernizr.addTest('cookies', function () {
              try {
                document.cookie = 'cookietest=1';
                var e = -1 !== document.cookie.indexOf('cookietest=');
                return (
                  (document.cookie =
                    'cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT'),
                  e
                );
              } catch (e) {
                return !1;
              }
            }),
            Modernizr.addAsyncTest(function () {
              var t;
              try {
                t = prefixed('indexedDB', window);
              } catch (t) {}
              if (t) {
                var r,
                  n = 'modernizr-' + Math.random();
                try {
                  r = t.open(n);
                } catch (t) {
                  return void addTest('indexeddb', !1);
                }
                (r.onerror = function (e) {
                  !r.error ||
                  ('InvalidStateError' !== r.error.name &&
                    'UnknownError' !== r.error.name)
                    ? (addTest('indexeddb', !0), detectDeleteDatabase(t, n))
                    : (addTest('indexeddb', !1), e.preventDefault());
                }),
                  (r.onsuccess = function () {
                    addTest('indexeddb', !0), detectDeleteDatabase(t, n);
                  });
              } else addTest('indexeddb', !1);
            }),
            Modernizr.addTest('localstorage', function () {
              var e = 'modernizr';
              try {
                return (
                  localStorage.setItem(e, e), localStorage.removeItem(e), !0
                );
              } catch (e) {
                return !1;
              }
            }),
            Modernizr.addTest('sessionstorage', function () {
              var e = 'modernizr';
              try {
                return (
                  sessionStorage.setItem(e, e), sessionStorage.removeItem(e), !0
                );
              } catch (e) {
                return !1;
              }
            }),
            Modernizr.addTest('websqldatabase', 'openDatabase' in window),
            Modernizr.addTest(
              'webanimations',
              'animate' in createElement('div'),
            ),
            Modernizr.addTest('webgl', function () {
              return 'WebGLRenderingContext' in window;
            }),
            Modernizr.addTest(
              'peerconnection',
              !!prefixed('RTCPeerConnection', window),
            ),
            Modernizr.addTest('datachannel', function () {
              if (Modernizr.peerconnection)
                for (var e = 0, t = domPrefixesAll.length; e < t; e++) {
                  var r = window[domPrefixesAll[e] + 'RTCPeerConnection'];
                  if (r)
                    try {
                      return 'createDataChannel' in new r({});
                    } catch (e) {}
                }
              return !1;
            }),
            Modernizr.addTest(
              'getUserMedia',
              'mediaDevices' in navigator &&
                'getUserMedia' in navigator.mediaDevices,
            ),
            Modernizr.addTest('resizeobserver', 'ResizeObserver' in window),
            Modernizr.addAsyncTest(function () {
              function e() {
                addTest('blobworkers', !1), t();
              }
              function t() {
                s && n.revokeObjectURL(s),
                  a && a.terminate(),
                  c && clearTimeout(c);
              }
              try {
                var r = window.BlobBuilder,
                  n = window.URL;
                Modernizr._config.usePrefix &&
                  ((r =
                    r ||
                    window.MozBlobBuilder ||
                    window.WebKitBlobBuilder ||
                    window.MSBlobBuilder ||
                    window.OBlobBuilder),
                  (n =
                    n ||
                    window.MozURL ||
                    window.webkitURL ||
                    window.MSURL ||
                    window.OURL));
                var o,
                  i,
                  a,
                  s,
                  c,
                  l = 'this.onmessage=function(e){postMessage(e.data)}';
                try {
                  o = new Blob([l], { type: 'text/javascript' });
                } catch (e) {}
                o || ((i = new r()).append(l), (o = i.getBlob())),
                  (s = n.createObjectURL(o)),
                  ((a = new Worker(s)).onmessage = function (e) {
                    addTest('blobworkers', 'Modernizr' === e.data), t();
                  }),
                  (a.onerror = e),
                  (c = setTimeout(e, 200)),
                  a.postMessage('Modernizr');
              } catch (t) {
                e();
              }
            }),
            Modernizr.addAsyncTest(function () {
              try {
                var t = new Worker(
                  'data:text/javascript;base64,dGhpcy5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7cG9zdE1lc3NhZ2UoZS5kYXRhKX0=',
                );
                (t.onmessage = function (e) {
                  t.terminate(),
                    addTest('dataworkers', 'Modernizr' === e.data),
                    (t = null);
                }),
                  (t.onerror = function () {
                    addTest('dataworkers', !1), (t = null);
                  }),
                  setTimeout(function () {
                    addTest('dataworkers', !1);
                  }, 200),
                  t.postMessage('Modernizr');
              } catch (t) {
                setTimeout(function () {
                  addTest('dataworkers', !1);
                }, 0);
              }
            }),
            Modernizr.addTest('sharedworkers', 'SharedWorker' in window),
            Modernizr.addTest(
              'blobconstructor',
              function () {
                try {
                  return !!new Blob();
                } catch (e) {
                  return !1;
                }
              },
              { aliases: ['blob-constructor'] },
            );
          var url = prefixed('URL', window, !1),
            url = url && window[url];
          Modernizr.addTest(
            'bloburls',
            url && 'revokeObjectURL' in url && 'createObjectURL' in url,
          ),
            Modernizr.addTest('webworkers', 'Worker' in window),
            Modernizr.addTest('typedarrays', 'ArrayBuffer' in window),
            Modernizr.addAsyncTest(function () {
              function e() {
                addTest('transferables', !1), t();
              }
              function t() {
                i && URL.revokeObjectURL(i),
                  a && a.terminate(),
                  n && clearTimeout(n);
              }
              if (
                !(
                  Modernizr.blobconstructor &&
                  Modernizr.bloburls &&
                  Modernizr.webworkers &&
                  Modernizr.typedarrays
                )
              )
                return addTest('transferables', !1);
              try {
                var r,
                  n,
                  o = new Blob(['var hello = "world"'], {
                    type: 'text/javascript',
                  }),
                  i = URL.createObjectURL(o),
                  a = new Worker(i);
                (a.onerror = e),
                  (n = setTimeout(e, 200)),
                  (r = new ArrayBuffer(1)),
                  a.postMessage(r, [r]),
                  addTest('transferables', 0 === r.byteLength),
                  t();
              } catch (t) {
                e();
              }
            }),
            testRunner(),
            setClasses(classes),
            delete ModernizrProto.addTest,
            delete ModernizrProto.addAsyncTest;
          for (var i = 0; i < Modernizr._q.length; i++) Modernizr._q[i]();
          scriptGlobalObject.Modernizr = Modernizr;
        })(window, window, document);
      })(modernizr),
      {
        Element: {
          sandbox: { title: 'iframe/sandbox', keyPath: 'iframe/sandbox' },
          seamless: { title: 'iframe/seamless', keyPath: 'iframe/seamless' },
          srcdoc: { title: 'iframe/srcdoc', keyPath: 'iframe/srcdoc' },
          apng: { title: 'img/apng', keyPath: 'img/apng' },
          avif: { title: 'img/avif', keyPath: 'img/avif' },
          imgcrossorigin: {
            title: 'img/crossorigin',
            keyPath: 'img/crossorigin',
          },
          exiforientation: {
            title: 'img/exif-orientation',
            keyPath: 'img/exif-orientation',
          },
          jpeg2000: { title: 'img/jpeg2000', keyPath: 'img/jpeg2000' },
          lazyloading: { title: 'img/lazyloading', keyPath: 'img/lazyloading' },
          webp: { title: 'img/webp', keyPath: 'img/webp' },
          prefetch: { title: 'link/prefetch', keyPath: 'link/prefetch' },
          scriptasync: { title: 'script/async', keyPath: 'script/async' },
          scriptdefer: { title: 'script/defer', keyPath: 'script/defer' },
        },
        Feature: {
          clipboard: { title: 'Clipboard', keyPath: 'clipboard' },
          contextmenu: { title: 'Contextmenu', keyPath: 'contextmenu' },
          customevent: { title: 'Custom Event', keyPath: 'event/customevent' },
          eventlistener: {
            title: 'Eventlistener',
            keyPath: 'event/eventlistener',
          },
          forcetouch: { title: 'Force Touch', keyPath: 'event/forcetouch' },
          hashchange: { title: 'Hash Change', keyPath: 'event/hashchange' },
          oninput: { title: 'Input Event', keyPath: 'event/oninput' },
          pointerevents: {
            title: 'Pointer Event',
            keyPath: 'event/forcetouch',
          },
          history: { title: 'History', keyPath: 'history' },
          messagechannel: {
            title: 'Message Channel',
            keyPath: 'messagechannel',
          },
          postmessage: { title: 'Postmessage', keyPath: 'postmessage' },
          performance: { title: 'Performance API', keyPath: 'performance' },
          queryselector: { title: 'queryselector', keyPath: 'queryselector' },
          requestanimationframe: {
            title: 'requestanimationframe',
            keyPath: 'requestanimationframe',
          },
          serviceworker: { title: 'Service Worker', keyPath: 'serviceworker' },
          webanimations: { title: 'Web Animation', keyPath: 'webanimations' },
          webgl: { title: 'WebGL', keyPath: 'webgl/webgl' },
          datachannel: {
            title: 'WebRTC/datachannel',
            keyPath: 'webrtc/datachannel',
          },
          getusermedia: {
            title: 'WebRTC/getusermedia',
            keyPath: 'webrtc/getusermedia',
          },
          peerconnection: {
            title: 'WebRTC/peerconnection',
            keyPath: 'webrtc/peerconnection',
          },
          resizeobserver: {
            title: 'Resizeobserver',
            keyPath: 'window/resizeobserver',
          },
          sharedworkers: {
            title: 'Shared Worker',
            keyPath: 'workers/sharedworkers',
          },
          webworkers: { title: 'Web Worker', keyPath: 'workers/webworkers' },
        },
        Network: {
          cors: { title: 'Cors', keyPath: 'cors' },
          beacon: { title: 'Beacon', keyPath: 'network/beacon' },
          fetch: { title: 'Fetch', keyPath: 'network/fetch' },
        },
        Javascript: {
          es6array: { title: 'ES6 Array', keyPath: 'es6/array' },
          arrow: { title: 'ES6 Arrow Function', keyPath: 'es6/arrow' },
          es6class: { title: 'ES6 Class', keyPath: 'es6/class' },
          es6collections: {
            title: 'ES6 Collections',
            keyPath: 'es6/collections',
          },
          generators: { title: 'ES6 Generators', keyPath: 'es6/generators' },
          es6math: { title: 'ES6 Math', keyPath: 'es6/math' },
          es6number: { title: 'ES6 Number', keyPath: 'es6/number' },
          es6object: { title: 'ES6 Object', keyPath: 'es6/object' },
          promises: { title: 'ES6 Promise', keyPath: 'es6/promises' },
          restparameters: {
            title: 'ES6 Rest Parameters',
            keyPath: 'es6/rest-parameters',
          },
          spreadarray: {
            title: 'ES6 Array Spread',
            keyPath: 'es6/spread-array',
          },
          stringtemplate: {
            title: 'ES6 String Template',
            keyPath: 'es6/string-template',
          },
          es6string: { title: 'ES6 String', keyPath: 'es6/string' },
          es6symbol: { title: 'ES6 Symbol', keyPath: 'es6/symbol' },
          es7array: { title: 'ES7 Array', keyPath: 'es7/array' },
          restdestructuringarray: {
            title: 'ES7 Rest Destructuring',
            keyPath: 'es7/rest-destructuring',
          },
          spreadobject: {
            title: 'ES7 Object Spread',
            keyPath: 'es7/spread-object',
          },
          es8object: { title: 'ES8 Object', keyPath: 'es8/object' },
          finally: {
            title: 'ES9 Promise Finally',
            customTest: '<ES6 Promise> && !!Promise.prototype.finally',
          },
        },
        Storage: {
          cookies: { title: 'Cookies', keyPath: 'storage/cookies' },
          indexeddb: { title: 'IndexedDB', keyPath: 'storage/indexeddb' },
          localstorage: {
            title: 'LocalStorage',
            keyPath: 'storage/localstorage',
          },
          sessionstorage: {
            title: 'SessionStorage',
            keyPath: 'storage/sessionstorage',
          },
          websqldatabase: {
            title: 'Web SQL Database',
            keyPath: 'storage/websqldatabase',
          },
        },
      }),
    GITHUB_BASE_URL =
      'https://github.com/Modernizr/Modernizr/tree/master/feature-detects',
    asyncFeatureKey = [
      'indexeddb',
      'apng',
      'avif',
      'exiforientation',
      'jpeg2000',
      'webp',
    ];
  function computeAsyncFeature(e) {
    return new Promise(function (t) {
      Modernizr.on(e, function (e) {
        t(e);
      });
    });
  }
  function computeResult() {
    return _computeResult.apply(this, arguments);
  }
  function _computeResult() {
    return (_computeResult = _asyncToGenerator(
      regenerator.mark(function e() {
        var r, t;
        return regenerator.wrap(function (e) {
          for (;;)
            switch ((e.prev = e.next)) {
              case 0:
                (r = {
                  Element: [],
                  Feature: [],
                  Network: [],
                  Javascript: [],
                  Storage: [],
                }),
                  getObjectKeys(FEATURE_MAP).forEach(function (e) {
                    var n = FEATURE_MAP[e],
                      t = getObjectKeys(n).map(
                        (function () {
                          var t = _asyncToGenerator(
                            regenerator.mark(function e(t) {
                              var r;
                              return regenerator.wrap(function (e) {
                                for (;;)
                                  switch ((e.prev = e.next)) {
                                    case 0:
                                      if (
                                        ((r = n[t]).keyPath &&
                                          (r.keyPath = ''
                                            .concat(GITHUB_BASE_URL, '/')
                                            .concat(r.keyPath, '.js')),
                                        -1 < asyncFeatureKey.indexOf(t))
                                      )
                                        return (
                                          (e.next = 5), computeAsyncFeature(t)
                                        );
                                      e.next = 8;
                                      break;
                                    case 5:
                                      (r.supported = e.sent), (e.next = 9);
                                      break;
                                    case 8:
                                      r.supported = Modernizr[t];
                                    case 9:
                                      return e.abrupt('return', r);
                                    case 10:
                                    case 'end':
                                      return e.stop();
                                  }
                              }, e);
                            }),
                          );
                          return function (e) {
                            return t.apply(this, arguments);
                          };
                        })(),
                      );
                    r[e] = t;
                  }),
                  (e.t0 = regenerator.keys(r));
              case 3:
                if ((e.t1 = e.t0()).done) e.next = 11;
                else {
                  if (((t = e.t1.value), hasOwnProperty(r, t)))
                    return (e.next = 8), Promise.all(r[t]);
                  e.next = 9;
                }
                break;
              case 8:
                r[t] = e.sent;
              case 9:
                e.next = 3;
                break;
              case 11:
                return e.abrupt('return', r);
              case 12:
              case 'end':
                return e.stop();
            }
        }, e);
      }),
    )).apply(this, arguments);
  }
  window.Modernizr.addTest(
    'finally',
    Modernizr.promises && !!Promise.prototype.finally,
  ),
    window.Modernizr.addTest(
      'iframe',
      Modernizr.sandbox && Modernizr.seamless && Modernizr.srcdoc,
    );
  var SystemPlugin = (function () {
      function e() {
        _classCallCheck(this, e), (this.name = 'SystemPlugin');
      }
      var t;
      return (
        _createClass(e, [
          {
            key: 'onCreated',
            value:
              ((t = _asyncToGenerator(
                regenerator.mark(function e() {
                  var t, r;
                  return regenerator.wrap(function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          return (
                            (t = getRandomId()), (e.next = 3), computeResult()
                          );
                        case 3:
                          (r = e.sent),
                            socketStore.broadcastMessage(
                              makeMessage(MESSAGE_TYPE.system, {
                                id: t,
                                system: {
                                  os: getOS(),
                                  ua: navigator.userAgent,
                                  browser: getBrowser(),
                                },
                                features: r,
                              }),
                            );
                        case 5:
                        case 'end':
                          return e.stop();
                      }
                  }, e);
                }),
              )),
              function () {
                return t.apply(this, arguments);
              }),
          },
        ]),
        e
      );
    })(),
    PagePlugin = (function () {
      function r() {
        _classCallCheck(this, r), _defineProperty(this, 'name', 'PagePlugin');
      }
      return (
        _createClass(
          r,
          [
            {
              key: 'onCreated',
              value: function () {
                window.addEventListener('load', function () {
                  var e = r.collectHtml();
                  socketStore.broadcastMessage(e);
                }),
                  socketStore.addListener(
                    MESSAGE_TYPE.refresh,
                    function (e, t) {
                      'page' === e.source.data && t(r.collectHtml());
                    },
                  );
              },
            },
          ],
          [
            {
              key: 'collectHtml',
              value: function () {
                var e = document.documentElement.outerHTML;
                return makeMessage(MESSAGE_TYPE.page, { html: e });
              },
            },
          ],
        ),
        r
      );
    })();
  function ownKeys$1(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread$1(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys$1(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys$1(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var StoragePlugin = (function () {
      function a() {
        _classCallCheck(this, a),
          _defineProperty(this, 'name', 'StoragePlugin');
      }
      return (
        _createClass(
          a,
          [
            {
              key: 'onCreated',
              value: function () {
                var r = a.sendStorageItem,
                  e = a.initStorageProxy,
                  n = _objectSpread$1({}, localStorage),
                  t =
                    (Object.keys(n).forEach(function (e) {
                      var t = n[e];
                      r({ type: 'local', action: 'get', key: e, value: t });
                    }),
                    _objectSpread$1({}, sessionStorage));
                Object.keys(t).forEach(function (e) {
                  var t = n[e];
                  r({ type: 'session', action: 'get', key: e, value: t });
                }),
                  document.cookie.split('; ').forEach(function (e) {
                    var e = _slicedToArray(e.split('='), 2),
                      t = e[0],
                      e = e[1];
                    r({ type: 'cookie', action: 'get', key: t, value: e });
                  }),
                  e();
              },
            },
          ],
          [
            {
              key: 'initStorageProxy',
              value: function () {
                var n = a.getStorageType,
                  o = a.sendStorageItem,
                  e = Storage.prototype,
                  t = e.clear,
                  r = e.removeItem,
                  i = e.setItem;
                (Storage.prototype.clear = function () {
                  var e = n(this);
                  return o({ type: e, action: 'clear' }), t.call(this);
                }),
                  (Storage.prototype.removeItem = function (e) {
                    var t = n(this);
                    return (
                      o({ type: t, action: 'remove', key: e }), r.call(this, e)
                    );
                  }),
                  (Storage.prototype.setItem = function (e, t) {
                    var r = n(this);
                    return (
                      o({ type: r, action: 'set', key: e, value: t }),
                      i.call(this, e, t)
                    );
                  });
              },
            },
            {
              key: 'sendStorageItem',
              value: function (e) {
                var t = e.type,
                  r = e.action,
                  n = e.key,
                  e = e.value,
                  t = makeMessage(MESSAGE_TYPE.storage, {
                    type: t,
                    action: r,
                    key: void 0 === n ? '' : n,
                    value: void 0 === e ? '' : e,
                  });
                socketStore.broadcastMessage(t);
              },
            },
            {
              key: 'getStorageType',
              value: function (e) {
                return e === localStorage
                  ? 'local'
                  : e === sessionStorage
                  ? 'session'
                  : e.constructor.name;
              },
            },
          ],
        ),
        a
      );
    })(),
    Request = (function () {
      function t() {
        var e =
          0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : '';
        if ((_classCallCheck(this, t), !(this.base = e)))
          throw Error('The api base url cannot be empty');
      }
      return (
        _createClass(t, [
          {
            key: 'createRoom',
            value: function (e) {
              var t = getOS(),
                r = getBrowser(),
                t = ''.concat(t, '-').concat(r);
              return fetch(
                'https://'
                  .concat(this.base, '/room/create?name=')
                  .concat(t, '&group=')
                  .concat(e),
                { method: 'GET' },
              )
                .then(function (e) {
                  return e.json();
                })
                .catch(function (e) {
                  throw Error('Connection failed: '.concat(e.message));
                });
            },
          },
          {
            key: 'getRoomUrl',
            value: function () {
              var i =
                  0 < arguments.length && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                e = Object.keys(i).reduce(function (e, t, r, n) {
                  var o = i[t];
                  return null == o
                    ? e
                    : ((t = ''.concat(t, '=').concat(o)),
                      r < n.length - 1 && (t += '&'),
                      e + t);
                }, '');
              return 'wss://'.concat(this.base, '/ws/room/join?').concat(e);
            },
          },
        ]),
        t
      );
    })(),
    name = '@huolala-tech/page-spy',
    version = '0.0.1',
    description = 'A developer tools for debug remote web page.',
    main = 'dist/index.min.js',
    module = 'dist/esm/index.mjs',
    types = 'dist/types/index.d.ts',
    license = 'MIT',
    files = ['dist'],
    engines = { node: '>=10' },
    scripts = {
      dev: 'vite',
      build: 'rollup -c',
      postbuild: 'cp -R ./types ./dist',
      'build:watch': 'rollup -c -w',
      test: 'jest',
      lint: 'eslint --ext .js,.ts ./src',
      'lint:fix': 'eslint --ext .js,.ts --fix ./src',
      prettier: "prettier --write '**/*.{js,jsx,tsx,ts,md,json}'",
      commit: 'git-cz',
      'release:major': 'standard-version --release-as major',
      'release:minor': 'standard-version --release-as minor',
      'release:patch': 'standard-version --release-as patch',
    },
    dependencies = {
      '@babel/runtime': '^7.13.0',
      'copy-to-clipboard': '^3.3.1',
    },
    devDependencies = {
      '@babel/core': '^7.14.0',
      '@babel/plugin-transform-runtime': '^7.14.2',
      '@babel/preset-env': '^7.14.1',
      '@babel/preset-typescript': '^7.13.0',
      '@rollup/plugin-alias': '^4.0.3',
      '@rollup/plugin-babel': '^6.0.3',
      '@rollup/plugin-commonjs': '^24.0.1',
      '@rollup/plugin-image': '^2.1.1',
      '@rollup/plugin-json': '^6.0.0',
      '@rollup/plugin-node-resolve': '^15.0.1',
      '@types/jest': '^27.4.1',
      '@typescript-eslint/eslint-plugin': '^5.53.0',
      '@typescript-eslint/parser': '^5.53.0',
      autoprefixer: '^10.3.4',
      eslint: '^7.26.0',
      'eslint-config-airbnb-base': '^15.0.0',
      'eslint-config-airbnb-typescript': '^17.0.0',
      'git-cz': '^4.7.6',
      jest: '^27.5.1',
      'jest-canvas-mock': '^2.3.1',
      less: '^4.1.1',
      'lint-staged': '^10.5.4',
      postcss: '^8.4.21',
      prettier: '^2.2.1',
      rollup: '^3.10.0',
      'rollup-plugin-delete': '^2.0.0',
      'rollup-plugin-peer-deps-external': '^2.2.4',
      'rollup-plugin-postcss': '^4.0.1',
      'rollup-plugin-typescript2': '^0.34.1',
      'rollup-plugin-uglify': '^6.0.4',
      'standard-version': '^9.1.1',
      'ts-jest': '^27.1.3',
      typescript: '^4.1.3',
      yorkie: '^2.0.0',
    },
    gitHooks = { 'pre-commit': 'lint-staged' },
    prettier = { singleQuote: !0, trailingComma: 'all', printWidth: 80 },
    browserslist = ['>0.2%', 'not dead', 'not op_mini all'],
    pkg = {
      name: name,
      version: version,
      description: description,
      main: main,
      module: module,
      types: types,
      license: license,
      files: files,
      engines: engines,
      scripts: scripts,
      dependencies: dependencies,
      devDependencies: devDependencies,
      gitHooks: gitHooks,
      'lint-staged': {
        '*.{js,jsx,less,md,json}': ['prettier --write'],
        '*.ts?(x)': ['prettier --parser=typescript --write'],
      },
      prettier: prettier,
      browserslist: browserslist,
    };
  function getPosition(e) {
    return window.TouchEvent && e instanceof TouchEvent ? e.touches[0] : e;
  }
  function moveable(r) {
    var n = r.getBoundingClientRect(),
      o = { xAxis: 0, yAxis: 0 },
      i = { x: 0, y: 0 };
    function a(e) {
      e.preventDefault(), (r.isMoveEvent = !0);
      var e = getPosition(e),
        t = e.clientX,
        e = e.clientY,
        t = t - i.x,
        e = e - i.y,
        t = n.x + t,
        e = (t < 0 ? (t = 0) : t > o.xAxis && (t = o.xAxis), n.y + e);
      e < 0 ? (e = 0) : e > o.yAxis && (e = o.yAxis),
        (r.style.left = ''.concat(t, 'px')),
        (r.style.top = ''.concat(e, 'px'));
    }
    function e(e) {
      e.preventDefault(),
        (r.isMoveEvent = !1),
        (n = r.getBoundingClientRect()),
        (o.xAxis = document.documentElement.offsetWidth - n.width),
        (o.yAxis = document.documentElement.offsetHeight - n.height);
      var e = getPosition(e),
        t = e.clientX,
        e = e.clientY;
      (i.x = t), (i.y = e), document.addEventListener('mousemove', a, !1);
    }
    function t() {
      (i.x = 0), (i.y = 0), document.removeEventListener('mousemove', a);
    }
    r.addEventListener('mousedown', e, !1),
      r.addEventListener('mouseup', t, !1),
      r.addEventListener('touchstart', e, !1),
      r.addEventListener('touchmove', a, !1),
      r.addEventListener('touchend', t, !1);
  }
  function styleInject(e, t) {
    var r,
      n,
      t = (t = void 0 === t ? {} : t).insertAt;
    e &&
      'undefined' != typeof document &&
      ((r = document.head || document.getElementsByTagName('head')[0]),
      ((n = document.createElement('style')).type = 'text/css'),
      'top' === t && r.firstChild
        ? r.insertBefore(n, r.firstChild)
        : r.appendChild(n),
      n.styleSheet
        ? (n.styleSheet.cssText = e)
        : n.appendChild(document.createTextNode(e)));
  }
  var css_248z =
      '#__pageSpy {\n  font-size: 14px;\n}\n#__pageSpy .page-spy-logo {\n  position: fixed;\n  left: 1.42857143em;\n  bottom: 5.71428571em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 5.71428571em;\n  height: 5.71428571em;\n  font-size: 1em;\n  border-radius: 5.71428571em;\n  background-color: #fff;\n  box-shadow: 0px 3px 10px 3px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  z-index: 13000;\n}\n#__pageSpy .page-spy-modal {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  opacity: 0;\n  transition: all ease-out 0.3s;\n  z-index: 13000;\n}\n#__pageSpy .page-spy-modal.show {\n  opacity: 1;\n}\n#__pageSpy .page-spy-content {\n  max-width: 21.42857143em;\n  background-color: #fafafa;\n  border-radius: 0.28571429em;\n  text-align: center;\n}\n#__pageSpy .page-spy-content__info {\n  padding: 1.71428571em 1.14285714em;\n  font-size: 1.14285714em;\n  line-height: 1.5;\n  text-align: left;\n  color: #202124;\n  letter-spacing: 2px;\n}\n#__pageSpy .page-spy-content__info > p {\n  margin: 0;\n  padding: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n#__pageSpy .page-spy-content__ok {\n  padding: 0.57142857em 0;\n  border-top: 1px solid #eee;\n  font-size: 1.14285714em;\n  color: #0591f5;\n  line-height: 1.5;\n}\n',
    img =
      (styleInject(css_248z),
      "data:image/svg+xml,%3csvg t='1676357485431' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2724' width='256' height='256'%3e%3cpath d='M820.736 807.488l96.288 96.288a32 32 0 1 1-45.248 45.248l-105.696-105.696a224 224 0 1 1 54.656-35.84z m-143.04-455.424a288.352 288.352 0 0 0-81.184 9.92c-25.28-19.84-53.888-33.44-84.512-39.04v77.568a289.6 289.6 0 0 0-64 58.464V322.88c-108.544 19.968-192 140-192 285.088 0 145.088 83.456 265.12 192 285.088v-72.064a289.6 289.6 0 0 0 64 58.464v13.6c5.344-0.96 10.656-2.24 15.872-3.68a286.144 286.144 0 0 0 83.168 32.128C571.744 946.112 527.2 960 480 960c-100.416 0-188.864-62.816-240.384-158.08A64 64 0 0 0 160 864a32 32 0 0 1-64 0 128 128 0 0 1 115.84-127.424A415.904 415.904 0 0 1 193.152 640H96a32 32 0 0 1 0-64h97.184c2.496-33.792 8.896-66.24 18.624-96.576A128 128 0 0 1 96 352a32 32 0 0 1 64 0 64 64 0 0 0 79.616 62.08c17.28-31.936 38.688-60.224 63.328-83.712a192 192 0 1 1 354.144 0c7.136 6.848 14.048 14.08 20.64 21.696z m116.32 26.976c3.84-8.192 5.984-17.376 5.984-27.04a32 32 0 0 1 64 0c0 21.92-5.504 42.56-15.232 60.608a288 288 0 0 0-54.72-33.568zM356.544 289.92A244.448 244.448 0 0 1 480 256c44.16 0 86.048 12.16 123.456 33.92A128.128 128.128 0 0 0 480 128a128 128 0 0 0-123.456 161.92zM672 800a160 160 0 1 0 0-320 160 160 0 0 0 0 320z' fill='black' p-id='2725'%3e%3c/path%3e%3c/svg%3e");
  function ownKeys(t, e) {
    var r,
      n = Object.keys(t);
    return (
      Object.getOwnPropertySymbols &&
        ((r = Object.getOwnPropertySymbols(t)),
        e &&
          (r = r.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
        n.push.apply(n, r)),
      n
    );
  }
  function _objectSpread(t) {
    for (var e = 1; e < arguments.length; e++) {
      var r = null != arguments[e] ? arguments[e] : {};
      e % 2
        ? ownKeys(Object(r), !0).forEach(function (e) {
            _defineProperty(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
        : ownKeys(Object(r)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
          });
    }
    return t;
  }
  var defaultBase = function () {
      var e = null == (e = document.currentScript) ? void 0 : e.baseURI;
      return e ? new URL(e).origin : '';
    },
    defaultTitle = function () {
      return document.title;
    },
    defaultConfig = { api: defaultBase(), project: defaultTitle() },
    mergeConfig = function (e) {
      return _objectSpread(_objectSpread({}, defaultConfig), e);
    },
    Identifier = '__pageSpy',
    PageSpy = (function () {
      function r(e) {
        var t = this,
          e =
            (_classCallCheck(this, r),
            _defineProperty(this, 'root', null),
            _defineProperty(this, 'version', pkg.version),
            _defineProperty(this, 'plugins', {}),
            _defineProperty(this, 'name', ''),
            _defineProperty(this, 'address', ''),
            _defineProperty(this, 'roomUrl', ''),
            _defineProperty(this, 'project', ''),
            mergeConfig(e));
        (this.request = new Request(e.api)),
          (this.project = e.project || 'page-spy-dev'),
          document.getElementById(Identifier)
            ? console.error('PageSpy has been inited.')
            : (this.loadPlugins(
                new ConsolePlugin(),
                new ErrorPlugin(),
                new NetworkPlugin(),
                new SystemPlugin(),
                new PagePlugin(),
                new StoragePlugin(),
              ),
              window.addEventListener(
                'DOMContentLoaded',
                _asyncToGenerator(
                  regenerator.mark(function e() {
                    return regenerator.wrap(function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), t.initConnection();
                          case 2:
                            t.deferRender();
                          case 3:
                          case 'end':
                            return e.stop();
                        }
                    }, e);
                  }),
                ),
              ),
              window.addEventListener('beforeunload', function () {
                socketStore.close();
              }));
      }
      var e, t;
      return (
        _createClass(r, [
          {
            key: 'loadPlugins',
            value: function () {
              for (
                var t = this, e = arguments.length, r = new Array(e), n = 0;
                n < e;
                n++
              )
                r[n] = arguments[n];
              r.forEach(function (e) {
                (t.plugins[e.name] = e).onCreated && e.onCreated();
              });
            },
          },
          {
            key: 'initConnection',
            value:
              ((t = _asyncToGenerator(
                regenerator.mark(function e() {
                  var t, r, n, o, i, a;
                  return regenerator.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            if (
                              null ===
                              (t = sessionStorage.getItem('page-spy-room'))
                            )
                              return (e.next = 4), this.createNewConnection();
                            e.next = 6;
                            break;
                          case 4:
                            e.next = 16;
                            break;
                          case 6:
                            if (
                              ((a = JSON.parse(t)),
                              (r = a.name),
                              (n = a.address),
                              (o = a.roomUrl),
                              (i = a.usable),
                              (a = a.project),
                              i && this.project === a)
                            ) {
                              e.next = 12;
                              break;
                            }
                            return (e.next = 10), this.createNewConnection();
                          case 10:
                            e.next = 16;
                            break;
                          case 12:
                            (this.name = r),
                              (this.address = n),
                              (this.roomUrl = o),
                              this.useOldConnection();
                          case 16:
                          case 'end':
                            return e.stop();
                        }
                    },
                    e,
                    this,
                  );
                }),
              )),
              function () {
                return t.apply(this, arguments);
              }),
          },
          {
            key: 'createNewConnection',
            value:
              ((e = _asyncToGenerator(
                regenerator.mark(function e() {
                  var t, r, n, o;
                  return regenerator.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (
                              (t = this.request),
                              (r = t.createRoom),
                              (t = t.getRoomUrl),
                              (e.next = 3),
                              r(this.project)
                            );
                          case 3:
                            return (
                              (r = e.sent),
                              (n = r.data),
                              (e.next = 7),
                              t({
                                address: n.address,
                                name: 'client:'.concat(getRandomId()),
                                userId: 'Client',
                              })
                            );
                          case 7:
                            (o = e.sent),
                              (this.name = n.name),
                              (this.address = n.address),
                              (this.roomUrl = o),
                              this.refreshRoomInfo(),
                              socketStore.init(o);
                          case 13:
                          case 'end':
                            return e.stop();
                        }
                    },
                    e,
                    this,
                  );
                }),
              )),
              function () {
                return e.apply(this, arguments);
              }),
          },
          {
            key: 'useOldConnection',
            value: function () {
              this.refreshRoomInfo(), socketStore.init(this.roomUrl);
            },
          },
          {
            key: 'deferRender',
            value: function () {
              var t,
                r = this;
              void 0 !== document
                ? 'loading' === document.readyState
                  ? window.addEventListener('DOMContentLoaded', this.render)
                  : this.render()
                : (t = setTimeout(function e() {
                    document && 'complete' === document.readyState
                      ? (t && clearTimeout(t), r.render())
                      : (t = setTimeout(e, 1));
                  }, 1));
            },
          },
          {
            key: 'refreshRoomInfo',
            value: function () {
              var t = this,
                r =
                  (this.saveSession(),
                  setInterval(function () {
                    var e = sessionStorage.getItem('page-spy-room');
                    if (null !== e && !1 === JSON.parse(e).usable)
                      return void clearInterval(r);
                    t.saveSession();
                  }, 15e3));
            },
          },
          {
            key: 'saveSession',
            value: function () {
              var e = this.name,
                t = this.address,
                r = this.roomUrl,
                n = this.project,
                e = JSON.stringify({
                  name: e,
                  address: t,
                  roomUrl: r,
                  usable: !0,
                  project: n,
                });
              sessionStorage.setItem('page-spy-room', e);
            },
          },
          {
            key: 'render',
            value: function () {
              var e = document.createElement('div'),
                t =
                  ((e.id = Identifier),
                  (this.root = e),
                  document.createElement('div')),
                r =
                  ((t.className = 'page-spy-logo'),
                  document.createElement('img')),
                n =
                  ((r.src = img),
                  (r.width = 50),
                  (r.height = 50),
                  t.append(r),
                  e.insertAdjacentElement('afterbegin', t),
                  new Modal()),
                r = new Content({
                  content: {
                    name: this.name,
                    address: this.address.slice(0, 4),
                    project: this.project,
                  },
                  onOk: function () {
                    n.close();
                  },
                });
              function o(e) {
                t.isMoveEvent || (e.stopPropagation(), n.show());
              }
              n.append(r.el),
                e.append(n.el),
                t.addEventListener('click', o, !1),
                t.addEventListener('touchend', o, !1),
                document.documentElement.append(e),
                moveable(t),
                this.handleDeviceDPR(),
                console.log('[PageSpy] init success.');
            },
          },
          {
            key: 'handleDeviceDPR',
            value: function () {
              var e = window.devicePixelRatio || 1,
                t = document.querySelector('[name="viewport"]');
              t &&
                ((t = (t.getAttribute('content') || '').match(
                  /initial-scale=\d+(\.\d+)?/,
                ))
                  ? parseFloat(t[0].split('=')[1])
                  : 1) < 1 &&
                (this.root.style.fontSize = ''.concat(14 * e, 'px'));
            },
          },
        ]),
        r
      );
    })();
  return PageSpy;
})();
